# L1G1000-ä¹¦ç”Ÿå¤§æ¨¡å‹å…¨é“¾è·¯å¼€æºä½“ç³»

è¿™é‡Œæä¾›è§‚çœ‹è§†é¢‘çš„åœ°å€BiliBiliï¼š[è§†é¢‘](https://www.bilibili.com/video/BV1CkSUYGE1v/)

è¿™æ˜¯æˆ‘æ—©æœŸå†™çš„ä¸€ç¯‡å…³äºå…¨é“¾è·¯ä½“ç³»çš„ç¬”è®°ï¼š[ç¬”è®°](https://github.com/Dstarjohn/SSPY-InternLM2-Notes)

è¿™æ˜¯è§†é¢‘æœ€æ–°çš„ä¸€äº›äº†è§£

### **é«˜è´¨é‡åˆæˆæ•°æ®æ–¹æ¡ˆ**

**åŸºäºè§„åˆ™çš„æ•°æ®æ„é€ **ï¼šä»£ç ã€æ•°å­¦å…¬å¼ã€å‡½æ•°ã€æ•°å­¦æ¨ç†çš„é¢˜è§£

**åŸºäºæ¨¡å‹çš„æ•°æ®æ‰©å……**ï¼šé€šè¿‡å¤§æ¨¡å‹æ¥ç”Ÿæˆç¬¦åˆè¦æ±‚çš„æµ·é‡æ•°æ®

**ç»™äºˆåé¦ˆçš„æ•°æ®ç”Ÿæˆ**ï¼šæ ¹æ®åé¦ˆçš„é”™è¯¯æˆ–è€…æ²¡æœ‰åˆ›ä½œèƒ½åŠ›æ›´æ–°çš„æ•°æ®

![](./image/1.png)

### 100ä¸‡çš„Tokenä¸Šä¸‹æ–‡æ”¯æŒ

æ”¯æŒå¤§æ¨¡å‹å¯¹æµ·é‡çš„ä¹¦æœ¬çŸ¥è¯†è¿›è¡Œå†…å®¹æ€»ç»“ï¼Œå¹¶ä¸”æ ¹æ®æä¾›çš„ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œå†…å®¹æ€»ç»“æå–æ ¸å¿ƒè¦ç‚¹ï¼Œæ”¯æŒå¤šæ ¼å¼çš„æ–‡ä»¶ã€‚

![](./image/2.png)

### åŸºäºè§„åˆ™å’Œæœç´¢è§£å†³å¤æ‚é—®é¢˜çš„æ€è·¯

ç»“åˆäº†MIndSearchæœç´¢å¼•æ“çš„æ–¹å¼æ¥æ›´åŠ ç²¾å‡†çš„å›ç­”å¤æ‚é—®é¢˜ï¼Œå¹¶ä¸”è®¾è®¡è¯¦ç»†çš„æ€ç»´è·¯å¾„æ‹†è§£çš„æ–¹å¼æ¥ä¿è¯å¤æ‚é—®é¢˜çš„ç®€å•åŒ–å¤„ç†ã€‚

![](./image/3.png)

### å…¨é“¾æ¡å¼€æºï¼Œä¸ç¤¾åŒºç”Ÿæ€æ— ç¼è¿æ¥

ä»æ•°æ®é›†ï¼ˆä¹¦ç”Ÿä¸‡å·ï¼‰åˆ°è®­ç»ƒæ¡†æ¶ï¼ˆ`InternEvo`ï¼‰ï¼Œå†åˆ°å¾®è°ƒï¼ˆ`XTuner`ï¼‰ï¼Œæ¨¡å‹éƒ¨ç½²ï¼ˆ`LMDeploy`ï¼‰ï¼Œæ¨¡å‹è¯„æµ‹ï¼ˆ`OpenCompass`ï¼‰ï¼Œåˆ°æœ€åçš„æ¨¡å‹åº”ç”¨ï¼ˆ`MindSearch`ï¼ˆæ€ç´¢å¼çš„å¼€æºæœç´¢åº”ç”¨ï¼‰ã€`Lagent`ï¼ˆæ”¯æŒä»£ç è§£é‡Šå™¨çš„æ™ºèƒ½ä½“æ¡†æ¶ï¼‰ã€`MinerU`ï¼ˆæç¬‘çš„æ–‡æ¡£è§£æå·¥å…·ï¼‰ã€`Huixiangdou`ï¼ˆåŸºäºä¸“ä¸šçŸ¥è¯†åº“çš„ç¾¤èŠå¤©åŠ©æ‰‹ï¼‰ï¼‰å¼€æºï¼Œå¹¶ä¸”å’Œå…¨çƒå¤šä¸ªå¼€æºç¤¾åŒºæ”¯æŒã€‚

![](./image/4.png)

#### å¼€æºæ•°æ®å¤„ç†å·¥å…·ç®±ï¼ˆæ”¯æŒæœ¬åœ°éƒ¨ç½²å’Œåœ¨çº¿ï¼‰

`MinerU`ï¼šä¸€ç«™å¼é«˜è´¨é‡æ•°æ®æå–å·¥å…·ï¼Œæ”¯æŒå¤šæ ¼å¼ï¼ˆpdf/ç½‘é¡µ/ç”µå­ä¹¦ï¼‰ï¼Œæ™ºèƒ½æå–ï¼Œç”Ÿæˆé«˜è´¨é‡çš„é¢„è®­ç»ƒé¢„æ–™ã€‚

é¡¹ç›®åœ°å€ï¼šhttps://github.com/opendatalab/MinerU

`Label LLM`ï¼šè‡´åŠ›äºLLMå¯¹è¯æ ‡æ³¨ï¼Œæ”¯æŒæŒ‡ä»¤é‡‡é›†ã€åå¥½æ”¶é›†ã€å¯¹è¯è¯„ä¼°ç­‰

é¡¹ç›®åœ°å€ï¼šhttps://github.com/opendatalab/LabelLLM

`LabelU`ï¼šæ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®æ ‡æ³¨ã€‚

é¡¹ç›®åœ°å€ï¼šhttps://github.com/opendatalab/labelU

![](./image/5.png)

#### é¢„è®­ç»ƒ InternEvo

![](./image/6.png)

#### å¾®è°ƒXTuner

![](./image/7.png)

#### OpenCompassè¯„æµ‹ä½“ç³»

![](./image/8.png)

#### éƒ¨ç½²LMDeploy

![](./image/9.png)

#### æ™ºèƒ½ä½“

![![](./image/9.png)](./image/10.png)

![](./image/11.png)

#### ä¼ä¸šçŸ¥è¯†åº“Huixiangdou

![](./image/12.png)

# L1G2000-ç©è½¬ä¹¦ç”Ÿã€Œå¤šæ¨¡æ€å¯¹è¯ã€ä¸ã€ŒAIæœç´¢ã€äº§å“

1.[ä¹¦ç”Ÿæµ¦è¯­](https://internlm-chat.intern-ai.org.cn/): åŸºäºåŸç”Ÿçš„ InternLM2.5 æœ€æ–° Chat æ¨¡å‹ (InternLM2.5-20B) æ­å»ºèŠå¤©æœºå™¨äººåº”ç”¨ã€‚æ‰€æœ‰æ³¨å†Œç”¨æˆ·é»˜è®¤å¼€æ”¾ 3 ç™¾ä¸‡ Tokens/æœˆçš„ API è°ƒç”¨é¢åº¦ï¼

äº¤äº’ç­”æ¡ˆï¼š

![](./image/14.png)

2.[MindSearch](https://internlm-chat.intern-ai.org.cn/suggestion/oVmlpR34V9U6v9KBQ1TN7IpPQh1Z89ONciSGUKmgFFA=): `InternLM` ç»„ç»‡ä»Šå¹´å¼€æºçš„ AI æœç´¢å¼•æ“ (æ¡†æ¶)ï¼ŒåŸºäºå¤šæ™ºèƒ½ä½“æŠ€æœ¯å°†ä½ æå‡ºçš„é—®é¢˜è¿›è¡Œåˆ†æã€æ‹†è§£ã€ç½‘é¡µæœç´¢ï¼Œæœ€ç»ˆç»™å‡ºæœ‰å‚è€ƒä¾æ®çš„é«˜å¯ä¿¡åº¦å›ç­”ã€‚ç›®å‰å¯ç›´æ¥åœ¨**ä¹¦ç”ŸÂ·æµ¦è¯­**äº§å“å†…ä½“éªŒä»¥ InternLM2.5-20B ä¸º Agent çš„ MindSearch å®˜æ–¹å®ç°ã€‚



**é—®é¢˜ï¼šç›®å‰ç”Ÿæˆå¼AIåœ¨å­¦æœ¯å’Œå·¥ä¸šç•Œæœ‰ä»€ä¹ˆæœ€æ–°è¿›å±•ï¼Ÿ**

![](./image/13.png)

çŸ¥ä¹å›å¤ç­”æ¡ˆé“¾æ¥ï¼šhttps://www.zhihu.com/question/1841339763/answer/38047215539

3.[ä¹¦ç”Ÿä¸‡è±¡](https://internvl.opengvlab.com/): `InternVL` å¼€æºæ¨¡å‹çš„å®˜æ–¹äº§å“ï¼ŒåŸç”Ÿæ”¯æŒå›¾æ–‡å¤šæ¨¡æ€å¯¹è¯èƒ½åŠ›.

äº¤äº’ï¼š

![](./image/15.png)

ä¸Šé¢ä¸»è¦æ˜¯ç®€å•çš„å¯¹ä¸‰ä¸ªåŒç§ç±»çš„äº§å“è¿›è¡Œæé—®ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªäº§å“çš„å›ç­”å’Œè¾“å‡ºéƒ½æ˜¯æ¯”è¾ƒç¬¦åˆç”¨æˆ·æé—®çš„ï¼Œè¿˜æœ‰æ›´å¤šäº§å“çš„è¾¹ç•Œèƒ½åŠ›ç­‰ä½ æ¥æµ‹è¯•ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å°½å¯èƒ½æè¿°çš„æ›´åŠ è¯¦ç»†ç‚¹ï¼Œæ„Ÿå—æœ€ä½³ä½“éªŒã€‚

# L1G3000-æµ¦è¯­æç¤ºè¯å·¥ç¨‹å®è·µ

### 1.1 ä»€ä¹ˆæ˜¯promptï¼ˆæç¤ºè¯ï¼‰

Promptæ˜¯ä¸€ç§ç”¨äºæŒ‡å¯¼ä»¥å¤§è¯­è¨€æ¨¡å‹ä¸ºä»£è¡¨çš„**ç”Ÿæˆå¼äººå·¥æ™ºèƒ½**ç”Ÿæˆå†…å®¹(æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ç­‰)çš„è¾“å…¥æ–¹å¼ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªç®€çŸ­çš„æ–‡æœ¬æˆ–é—®é¢˜ï¼Œç”¨äºæè¿°ä»»åŠ¡å’Œè¦æ±‚ã€‚

Promptå¯ä»¥åŒ…å«ä¸€äº›ç‰¹å®šçš„å…³é”®è¯æˆ–çŸ­è¯­ï¼Œç”¨äºå¼•å¯¼æ¨¡å‹ç”Ÿæˆç¬¦åˆç‰¹å®šä¸»é¢˜æˆ–é£æ ¼çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦ç”Ÿæˆä¸€ç¯‡å…³äºâ€œäººå·¥æ™ºèƒ½â€çš„æ–‡ç« ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œäººå·¥æ™ºèƒ½â€ä½œä¸ºPromptï¼Œè®©æ¨¡å‹ç”Ÿæˆä¸€ç¯‡å…³äºäººå·¥æ™ºèƒ½çš„ä»‹ç»ã€åº”ç”¨ã€å‘å±•ç­‰æ–¹é¢çš„æ–‡ç« ã€‚

Promptè¿˜å¯ä»¥åŒ…å«ä¸€äº›ç‰¹å®šçš„æŒ‡ä»¤æˆ–è¦æ±‚ï¼Œç”¨äºæ§åˆ¶ç”Ÿæˆæ–‡æœ¬çš„è¯­æ°”ã€é£æ ¼ã€é•¿åº¦ç­‰æ–¹é¢ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œè¯·ç”¨å¹½é»˜çš„è¯­æ°”æè¿°äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹â€ä½œä¸ºPromptï¼Œè®©æ¨¡å‹ç”Ÿæˆä¸€ç¯‡å¹½é»˜é£è¶£çš„æ–‡ç« ã€‚

æ€»ä¹‹ï¼ŒPromptæ˜¯ä¸€ç§çµæ´»ã€å¤šæ ·åŒ–çš„è¾“å…¥æ–¹å¼ï¼Œå¯ä»¥ç”¨äºæŒ‡å¯¼å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆå„ç§ç±»å‹çš„å†…å®¹ã€‚

### 1.2 ä»€ä¹ˆæ˜¯æç¤ºè¯å·¥ç¨‹ï¼Ÿ

æç¤ºå·¥ç¨‹æ˜¯ä¸€ç§é€šè¿‡è®¾è®¡å’Œè°ƒæ•´è¾“å…¥(Prompts)æ¥æ”¹å–„æ¨¡å‹æ€§èƒ½æˆ–æ§åˆ¶å…¶è¾“å‡ºç»“æœçš„æŠ€æœ¯ã€‚

åœ¨æ¨¡å‹å›å¤çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ï¼Œç„¶åå¤„ç†æ–‡æœ¬ç‰¹å¾å¹¶æ ¹æ®è¾“å…¥æ–‡æœ¬ç‰¹å¾é¢„æµ‹ä¹‹åçš„æ–‡æœ¬ï¼ŒåŸç†ä¸º**next token prediction**ï¼Œæç¤ºå·¥ç¨‹æ˜¯æ¨¡å‹æ€§èƒ½ä¼˜åŒ–çš„åŸºçŸ³ï¼Œæœ‰ä»¥ä¸‹å…­å¤§åŸºæœ¬åŸåˆ™ï¼š

- æŒ‡ä»¤è¦æ¸…æ™°
- æä¾›å‚è€ƒå†…å®¹
- å¤æ‚çš„ä»»åŠ¡æ‹†åˆ†æˆå­ä»»åŠ¡
- ç»™ LLMâ€œæ€è€ƒâ€æ—¶é—´(ç»™å‡ºè¿‡ç¨‹)
- ä½¿ç”¨å¤–éƒ¨å·¥å…·
- ç³»ç»Ÿæ€§æµ‹è¯•å˜åŒ–

åœ¨æç¤ºå·¥ç¨‹ä¸­ï¼Œç¬¬ä¸€ç‚¹ç»™å‡ºæ¸…æ™°çš„æŒ‡ä»¤æ˜¯è‡³å…³é‡è¦çš„ã€‚ä¸€ä¸ªæœ‰æ•ˆçš„æŒ‡ä»¤é€šå¸¸åŒ…å«ä»¥ä¸‹è¦ç´ ï¼šèƒŒæ™¯ã€ä»»åŠ¡ã€è¦æ±‚ã€é™åˆ¶æ¡ä»¶ã€ç¤ºä¾‹ã€è¾“å‡ºæ ¼å¼å’Œç›®æ ‡ã€‚é€šè¿‡æä¾›è¿™äº›è¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼æ¨¡å‹ç”Ÿæˆæ›´ç¬¦åˆæˆ‘ä»¬æœŸæœ›çš„æ–‡æœ¬ã€‚

è¿™é‡Œæä¾›å‚è€ƒèµ„æ–™ï¼š

- [OpenAI å®˜æ–¹æç¤ºå·¥ç¨‹æŒ‡å—](https://platform.openai.com/docs/guides/prompt-engineering)
- [Claude å®˜æ–¹æç¤ºå·¥ç¨‹æŒ‡å—](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/overview)
- [LangGPT çŸ¥è¯†åº“](https://langgptai.feishu.cn/wiki/RXdbwRyASiShtDky381ciwFEnpe)
- [ä¸‡å­—è§£è¯»ChatGPTæç¤ºè¯æœ€ä½³æ¡ˆä¾‹](https://langgptai.feishu.cn/wiki/IpdUwZRzgiYYH7kuOsDc3fWrnkg)

### 1.3 æç¤ºè®¾è®¡æ¡†æ¶

CRISPEï¼Œå‚è€ƒï¼šhttps://github.com/mattnigh/ChatGPT3-Free-Prompt-List

- **C**apacity and **R**ole (èƒ½åŠ›ä¸è§’è‰²)ï¼šå¸Œæœ› ChatGPT æ‰®æ¼”æ€æ ·çš„è§’è‰²ã€‚

- **I**nsight (æ´å¯ŸåŠ›)ï¼šèƒŒæ™¯ä¿¡æ¯å’Œä¸Šä¸‹æ–‡(å¦ç‡è¯´æ¥æˆ‘è§‰å¾—ç”¨ Context æ›´å¥½)

- **S**tatement (æŒ‡ä»¤)ï¼šå¸Œæœ› ChatGPT åšä»€ä¹ˆã€‚

- **P**ersonality (ä¸ªæ€§)ï¼šå¸Œæœ› ChatGPT ä»¥ä»€ä¹ˆé£æ ¼æˆ–æ–¹å¼å›ç­”ä½ ã€‚

- **E**xperiment (å°è¯•)ï¼šè¦æ±‚ ChatGPT æä¾›å¤šä¸ªç­”æ¡ˆã€‚

  

CO-STARï¼Œå‚è€ƒï¼šhttps://aiadvisoryboards.wordpress.com/2024/01/30/co-star-framework/

- **C**ontext (èƒŒæ™¯): æä¾›ä»»åŠ¡èƒŒæ™¯ä¿¡æ¯
- **O**bjective (ç›®æ ‡): å®šä¹‰éœ€è¦LLMæ‰§è¡Œçš„ä»»åŠ¡
- **S**tyle (é£æ ¼): æŒ‡å®šå¸Œæœ›LLMå…·å¤‡çš„å†™ä½œé£æ ¼
- **T**one (è¯­æ°”): è®¾å®šLLMå›å¤çš„æƒ…æ„ŸåŸºè°ƒ
- **A**udience (è§‚ä¼—): è¡¨æ˜å›å¤çš„å¯¹è±¡
- **R**esponse (å›å¤): æä¾›å›å¤æ ¼å¼

ä¾‹å¦‚æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªè§£å†³æ–¹æ¡ˆä¸“å®¶ï¼Œç”¨äºæŠŠç›®æ ‡æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„è®¡åˆ’ï¼Œå®Œæˆçš„æç¤ºè¯å¦‚ä¸‹ï¼š

```
# CONTEXT # 
æˆ‘æ˜¯ä¸€åä¸ªäººç”Ÿäº§åŠ›å¼€å‘è€…ã€‚åœ¨ä¸ªäººå‘å±•å’Œç”Ÿäº§åŠ›é¢†åŸŸ,äººä»¬è¶Šæ¥è¶Šéœ€è¦è¿™æ ·çš„ç³»ç»Ÿ:ä¸ä»…èƒ½å¸®åŠ©ä¸ªäººè®¾å®šç›®æ ‡,è¿˜èƒ½å°†è¿™äº›ç›®æ ‡è½¬åŒ–ä¸ºå¯è¡Œçš„æ­¥éª¤ã€‚è®¸å¤šäººåœ¨å°†æŠ±è´Ÿè½¬åŒ–ä¸ºå…·ä½“è¡ŒåŠ¨æ—¶é‡åˆ°å›°éš¾,å‡¸æ˜¾å‡ºéœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„ç›®æ ‡åˆ°ç³»ç»Ÿçš„è½¬æ¢è¿‡ç¨‹ã€‚

#########

# OBJECTIVE #
æ‚¨çš„ä»»åŠ¡æ˜¯æŒ‡å¯¼æˆ‘åˆ›å»ºä¸€ä¸ªå…¨é¢çš„ç³»ç»Ÿè½¬æ¢å™¨ã€‚è¿™æ¶‰åŠå°†è¿‡ç¨‹åˆ†è§£ä¸ºä¸åŒçš„æ­¥éª¤,åŒ…æ‹¬è¯†åˆ«ç›®æ ‡ã€è¿ç”¨5ä¸ªä¸ºä»€ä¹ˆæŠ€å·§ã€å­¦ä¹ æ ¸å¿ƒè¡ŒåŠ¨ã€è®¾å®šæ„å›¾ä»¥åŠè¿›è¡Œå®šæœŸå›é¡¾ã€‚ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé€æ­¥æŒ‡å—,ä»¥æ— ç¼åœ°å°†ç›®æ ‡è½¬åŒ–ä¸ºå¯è¡Œçš„è®¡åˆ’ã€‚

#########

# STYLE #
ä»¥å¯Œæœ‰ä¿¡æ¯æ€§å’Œæ•™è‚²æ€§çš„é£æ ¼å†™ä½œ,ç±»ä¼¼äºä¸ªäººå‘å±•æŒ‡å—ã€‚ç¡®ä¿æ¯ä¸ªæ­¥éª¤çš„å‘ˆç°éƒ½æ¸…æ™°è¿è´¯,è¿åˆé‚£äº›æ¸´æœ›æé«˜ç”Ÿäº§åŠ›å’Œå®ç°ç›®æ ‡æŠ€èƒ½çš„å—ä¼—ã€‚

#########

# Tone #
å§‹ç»ˆä¿æŒç§¯æå’Œé¼“èˆäººå¿ƒçš„è¯­æ°”,åŸ¹å…»ä¸€ç§èµ‹æƒå’Œé¼“åŠ±çš„æ„Ÿè§‰ã€‚åº”è¯¥æ„Ÿè§‰åƒæ˜¯ä¸€ä½å‹å¥½çš„å‘å¯¼åœ¨æä¾›å®è´µçš„è§è§£ã€‚

# AUDIENCE #
ç›®æ ‡å—ä¼—æ˜¯å¯¹ä¸ªäººå‘å±•å’Œæé«˜ç”Ÿäº§åŠ›æ„Ÿå…´è¶£çš„ä¸ªäººã€‚å‡è®¾è¯»è€…å¯»æ±‚å®ç”¨å»ºè®®å’Œå¯è¡Œæ­¥éª¤,ä»¥å°†ä»–ä»¬çš„ç›®æ ‡è½¬åŒ–ä¸ºåˆ‡å®çš„æˆæœã€‚

#########

# RESPONSE FORMAT #
æä¾›ä¸€ä¸ªç»“æ„åŒ–çš„ç›®æ ‡åˆ°ç³»ç»Ÿè½¬æ¢è¿‡ç¨‹æ­¥éª¤åˆ—è¡¨ã€‚æ¯ä¸ªæ­¥éª¤éƒ½åº”è¯¥æ¸…æ™°å®šä¹‰,æ•´ä½“æ ¼å¼åº”æ˜“äºéµå¾ªä»¥ä¾¿å¿«é€Ÿå®æ–½ã€‚

#############

# START ANALYSIS #
å¦‚æœæ‚¨ç†è§£äº†,è¯·è¯¢é—®æˆ‘çš„ç›®æ ‡ã€‚
```



### 2. LangGPTç»“æ„åŒ–æç¤ºè¯

LangGPT æ˜¯ **Language For GPT-like LLMs** çš„ç®€ç§°ï¼Œä¸­æ–‡åä¸ºç»“æ„åŒ–æç¤ºè¯ã€‚LangGPT æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ ç¼–å†™é«˜è´¨é‡æç¤ºè¯çš„å·¥å…·ï¼Œç†è®ºåŸºç¡€æ˜¯æˆ‘ä»¬æå‡ºçš„ä¸€å¥—æ¨¡å—åŒ–ã€æ ‡å‡†åŒ–çš„æç¤ºè¯ç¼–å†™æ–¹æ³•è®ºâ€”â€”ç»“æ„åŒ–æç¤ºè¯ã€‚æˆ‘ä»¬å¸Œæœ›æ­å¼€æç¤ºå·¥ç¨‹çš„ç¥ç§˜é¢çº±ï¼Œä¸ºå¤§ä¼—æä¾›ä¸€å¥—å¯æ“ä½œã€å¯å¤ç°çš„æç¤ºè¯æ–¹æ³•è®ºã€å·¥å…·å’Œäº¤æµç¤¾ç¾¤ã€‚æˆ‘ä»¬çš„æ„¿æ™¯æ˜¯è®©äººäººéƒ½èƒ½å†™å‡ºé«˜è´¨é‡æç¤ºè¯ã€‚[LangGPTç¤¾åŒºæ–‡æ¡£](https://langgptai.feishu.cn/wiki/RXdbwRyASiShtDky381ciwFEnpe)ï¼š[https://langgpt.ai](https://langgpt.ai/)

#### 2.1 LangGPTç»“æ„

LangGPTæ¡†æ¶å‚è€ƒäº†é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„æ€æƒ³ï¼Œè®¾è®¡ä¸ºåŸºäºè§’è‰²çš„åŒå±‚ç»“æ„ï¼Œä¸€ä¸ªå®Œæ•´çš„æç¤ºè¯åŒ…å«**æ¨¡å—-å†…éƒ¨å…ƒç´ **ä¸¤çº§ï¼Œæ¨¡å—è¡¨ç¤ºè¦æ±‚æˆ–æç¤ºLLMçš„æ–¹é¢ï¼Œä¾‹å¦‚ï¼šèƒŒæ™¯ä¿¡æ¯ã€å»ºè®®ã€çº¦æŸç­‰ã€‚å†…éƒ¨å…ƒç´ ä¸ºæ¨¡å—çš„ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯å½’å±æŸä¸€æ–¹é¢çš„å…·ä½“è¦æ±‚æˆ–è¾…åŠ©ä¿¡æ¯ï¼Œåˆ†ä¸ºèµ‹å€¼å‹å’Œæ–¹æ³•å‹ã€‚

#### 2.2 ç¼–å†™æŠ€å·§

- **æ„å»ºå…¨å±€æ€ç»´é“¾**

- å¯¹å¤§æ¨¡å‹çš„ Prompt åº”ç”¨CoT æ€ç»´é“¾æ–¹æ³•çš„æœ‰æ•ˆæ€§æ˜¯è¢«ç ”ç©¶å’Œå®è·µå¹¿æ³›è¯æ˜äº†çš„ã€‚é¦–å…ˆå¯ä»¥æ ¹æ®åœºæ™¯é€‰æ‹©åŸºæœ¬çš„æ¨¡å—ã€‚

  [![img](https://camo.githubusercontent.com/2d302eb3d29be03f7a39cc5a4e5ea4e7bd0dd5ea151b7ae8ce15074c7e5151e7/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f35363330362f30356533383061382d623632372d343266322d623065362d3334336263393932336633652e706e67)](https://camo.githubusercontent.com/2d302eb3d29be03f7a39cc5a4e5ea4e7bd0dd5ea151b7ae8ce15074c7e5151e7/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f35363330362f30356533383061382d623632372d343266322d623065362d3334336263393932336633652e706e67)

  **ä¸€ä¸ªå¥½çš„ç»“æ„åŒ– Prompt æ¨¡æ¿ï¼ŒæŸç§æ„ä¹‰ä¸Šæ˜¯æ„å»ºäº†ä¸€ä¸ªå¥½çš„å…¨å±€æ€ç»´é“¾ã€‚** å¦‚ LangGPT ä¸­å±•ç¤ºçš„æ¨¡æ¿è®¾è®¡æ—¶å°±è€ƒè™‘äº†å¦‚ä¸‹æ€ç»´é“¾:

  > ğŸ’¡ Role (è§’è‰²) -> Profileï¼ˆè§’è‰²ç®€ä»‹ï¼‰â€”> Profile ä¸‹çš„ skill (è§’è‰²æŠ€èƒ½) -> Rules (è§’è‰²è¦éµå®ˆçš„è§„åˆ™) -> Workflow (æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„è§’è‰²çš„å·¥ä½œæµç¨‹) -> Initialization (è¿›è¡Œæ­£å¼å¼€å§‹å·¥ä½œçš„åˆå§‹åŒ–å‡†å¤‡) -> å¼€å§‹å®é™…ä½¿ç”¨

  ä¸€ä¸ªå¥½çš„ Prompt ï¼Œå†…å®¹ç»“æ„ä¸Šæœ€å¥½ä¹Ÿæ˜¯é€»è¾‘æ¸…æ™°è¿è´¯çš„ã€‚**ç»“æ„åŒ– prompt æ–¹æ³•å°†ä¹…ç»è€ƒéªŒçš„é€»è¾‘æ€ç»´é“¾è·¯èå…¥äº†ç»“æ„ä¸­ï¼Œå¤§å¤§é™ä½äº†æ€ç»´é“¾è·¯çš„æ„å»ºéš¾åº¦ã€‚**

  æ„å»º Prompt æ—¶ï¼Œä¸å¦¨å‚è€ƒä¼˜è´¨æ¨¡æ¿çš„å…¨å±€æ€ç»´é“¾è·¯ï¼Œç†Ÿç»ƒæŒæ¡åï¼Œå®Œå…¨å¯ä»¥å¯¹å…¶è¿›è¡Œå¢åˆ æ”¹ç•™è°ƒæ•´å¾—åˆ°ä¸€ä¸ªé€‚åˆè‡ªå·±ä½¿ç”¨çš„æ¨¡æ¿ã€‚ä¾‹å¦‚å½“ä½ éœ€è¦æ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œå°¤å…¶æ˜¯éœ€è¦æ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œå®Œå…¨å¯ä»¥å¢åŠ  `Output` æˆ–è€… `OutputFormat` è¿™æ ·çš„æ¨¡å—ã€‚

- **ä¿æŒä¸Šä¸‹æ–‡è¯­ä¹‰ä¸€è‡´æ€§**

  åŒ…å«ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯**æ ¼å¼è¯­ä¹‰ä¸€è‡´æ€§**ï¼Œä¸€ä¸ªæ˜¯**å†…å®¹è¯­ä¹‰ä¸€è‡´æ€§**ã€‚

  **æ ¼å¼è¯­ä¹‰ä¸€è‡´æ€§æ˜¯æŒ‡æ ‡è¯†ç¬¦çš„æ ‡è¯†åŠŸèƒ½å‰åä¸€è‡´ã€‚** æœ€å¥½ä¸è¦æ··ç”¨ï¼Œæ¯”å¦‚ `#` æ—¢ç”¨äºæ ‡è¯†æ ‡é¢˜ï¼Œåˆç”¨äºæ ‡è¯†å˜é‡è¿™ç§è¡Œä¸ºå°±é€ æˆäº†å‰åä¸ä¸€è‡´ï¼Œè¿™ä¼šå¯¹æ¨¡å‹è¯†åˆ« Prompt çš„å±‚çº§ç»“æ„é€ æˆå¹²æ‰°ã€‚

  **å†…å®¹è¯­ä¹‰ä¸€è‡´æ€§æ˜¯æŒ‡æ€ç»´é“¾è·¯ä¸Šçš„å±æ€§è¯è¯­ä¹‰åˆé€‚ã€‚** ä¾‹å¦‚ LangGPT ä¸­çš„ `Profile` å±æ€§è¯ï¼Œä½¿ä¹‹åŠŸèƒ½æ›´åŠ æ˜ç¡®ï¼šå³è§’è‰²çš„ç®€å†ã€‚ç»“æ„åŒ– Prompt æ€æƒ³è¢«å¹¿æ³›ä½¿ç”¨åè¡ç”Ÿå‡ºäº†è®¸è®¸å¤šå¤šçš„æ¨¡æ¿ï¼Œä½†åŸºæœ¬éƒ½ä¿ç•™äº† `Profile` çš„è¯¸å¤šè®¾è®¡ï¼Œè¯´æ˜å…¶è®¾è®¡æ˜¯æˆåŠŸæœ‰æ•ˆçš„ã€‚

  **å†…å®¹è¯­ä¹‰ä¸€è‡´æ€§è¿˜åŒ…æ‹¬å±æ€§è¯å’Œç›¸åº”æ¨¡å—å†…å®¹çš„è¯­ä¹‰ä¸€è‡´ã€‚** ä¾‹å¦‚ `Rules` éƒ¨åˆ†æ˜¯è§’è‰²éœ€è¦éµå®ˆè§„åˆ™ï¼Œåˆ™ä¸å®œå°†è§’è‰²æŠ€èƒ½ã€æè¿°å¤§é‡å †ç Œåœ¨æ­¤ã€‚

- **æœ‰æœºç»“åˆå…¶ä»– Prompt æŠ€å·§**

  LangGPTç»“æ„åœ¨è®¾è®¡æ—¶æ²¡æœ‰æ‹˜æ³¥äºå…·ä½“çš„æ–¹é¢ï¼Œç›¸æ¯”å…¶ä»–çš„æç¤ºè®¾è®¡æ¡†æ¶ï¼Œæ›´åŠ çµæ´»ï¼Œå…·æœ‰æ›´å¼ºçš„å¯æ‰©å±•æ€§å’Œå…¼å®¹æ€§ï¼Œå¯ä»¥å¾ˆå¥½åœ°ç»“åˆå…¶ä»–æç¤ºè®¾è®¡æŠ€å·§ã€‚

  æ„å»ºé«˜è´¨é‡ Prompt æ—¶ï¼Œå°†è¿™äº›æ–¹æ³•ç»“åˆä½¿ç”¨ï¼Œç»“æ„åŒ–æ–¹å¼èƒ½å¤Ÿæ›´ä¾¿äºå„ä¸ªæŠ€å·§é—´çš„ååŒç»„ç»‡ï¼Œä¾‹å¦‚å°† CoT æ–¹æ³•èåˆåˆ°ç»“æ„åŒ– Prompt ä¸­ç¼–å†™æç¤ºè¯ã€‚ æ±‡æ€»ç°æœ‰çš„ä¸€äº›æ–¹æ³•ï¼š

  1. ç»†èŠ‚æ³•ï¼šç»™å‡ºæ›´æ¸…æ™°çš„æŒ‡ä»¤ï¼ŒåŒ…å«æ›´å¤šå…·ä½“çš„ç»†èŠ‚
  2. åˆ†è§£æ³•ï¼šå°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£ä¸ºæ›´ç®€å•çš„å­ä»»åŠ¡ ï¼ˆLet's think step by step, CoTï¼ŒLangChainç­‰æ€æƒ³ï¼‰
  3. è®°å¿†æ³•ï¼šæ„å»ºæŒ‡ä»¤ä½¿æ¨¡å‹æ—¶åˆ»è®°ä½ä»»åŠ¡ï¼Œç¡®ä¿ä¸åç¦»ä»»åŠ¡è§£å†³è·¯å¾„ï¼ˆsystem çº§ promptï¼‰
  4. è§£é‡Šæ³•ï¼šè®©æ¨¡å‹åœ¨å›ç­”ä¹‹å‰è¿›è¡Œè§£é‡Šï¼Œè¯´æ˜ç†ç”± ï¼ˆCoT ç­‰æ–¹æ³•ï¼‰
  5. æŠ•ç¥¨æ³•ï¼šè®©æ¨¡å‹ç»™å‡ºå¤šä¸ªç»“æœï¼Œç„¶åä½¿ç”¨æ¨¡å‹é€‰æ‹©æœ€ä½³ç»“æœ ï¼ˆToT ç­‰æ–¹æ³•ï¼‰
  6. ç¤ºä¾‹æ³•ï¼šæä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå…·ä½“ä¾‹å­ï¼Œæä¾›è¾“å…¥è¾“å‡ºç¤ºä¾‹ ï¼ˆone-shot, few-shot ç­‰æ–¹æ³•ï¼‰

  ä¸Šé¢è¿™äº›æ–¹æ³•æœ€å¥½ç»“åˆä½¿ç”¨ï¼Œä»¥å®ç°åœ¨å¤æ‚ä»»åŠ¡ä¸­å®ç°ä½¿ç”¨ä¸å¯é å·¥å…·ï¼ˆLLMsï¼‰æ„å»ºå¯é ç³»ç»Ÿçš„ç›®æ ‡ã€‚

  #### 2.3 å¸¸ç”¨çš„æç¤ºè¯æ¨¡å—

  ç»“æ„åŒ–æç¤ºè¯æ›´å¤šä½“ç°çš„æ˜¯ä¸€ç§æ€æƒ³ï¼Œæœ¬ç« æ‰€ç»™å‡ºçš„æç¤ºè¯æ¨¡æ¿ä¹Ÿåªæ˜¯å½“å‰çš„æœ€ä½³å®è·µï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­å¤§å®¶å¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œå¢åˆ å„ä¸ªæ¨¡å—ï¼Œé‡æ„ç›¸å…³æ¨¡å—ï¼Œç”šè‡³æå‡ºä¸€å¥—å…¨æ–°çš„æ¨¡æ¿ã€‚

  ç¼–å†™æç¤ºè¯æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸åŒéœ€æ±‚æ·»åŠ ä¸åŒæ¨¡å—è¦ç‚¹ã€‚å¦‚æœé‡‡ç”¨å›ºå®šçš„æ¨¡å¼å†™æ³•ï¼Œåœ¨é¢å¯¹å·®å¼‚å·¨å¤§çš„éœ€æ±‚åœºæ™¯æ—¶ï¼Œç»å¸¸ä¼šå› ç¼ºå°‘æŸäº›æè¿°è€Œå¯¼è‡´æ•ˆæœå˜å·®ã€‚ä¸‹é¢æ•´ç†äº†æŒ‰å­—æ¯ä»A-Zæ’åˆ—çš„å…±30ä¸ªè§’åº¦çš„æ¨¡å—ï¼Œä½¿ç”¨æ—¶ï¼Œå¯ä»å…¶ä¸­æŒ‘é€‰åˆé€‚çš„æ¨¡å—ç»„è£…ã€‚

  - Attentionï¼šéœ€é‡ç‚¹å¼ºè°ƒçš„è¦ç‚¹
  - Backgroundï¼šæç¤ºè¯çš„éœ€æ±‚èƒŒæ™¯
  - Constraintsï¼šé™åˆ¶æ¡ä»¶
  - Commandï¼šç”¨äºå®šä¹‰å¤§æ¨¡å‹æŒ‡ä»¤
  - Definitionï¼šåè¯å®šä¹‰
  - Exampleï¼šæç¤ºè¯ä¸­çš„ç¤ºä¾‹few-shots
  - Failï¼šå¤„ç†å¤±è´¥æ—¶å¯¹åº”çš„å…œåº•é€»è¾‘
  - Goalï¼šæç¤ºè¯è¦å®ç°çš„ç›®æ ‡
  - Hackï¼šé˜²æ­¢è¢«æ”»å‡»çš„é˜²æŠ¤è¯
  - In-depthï¼šä¸€æ­¥æ­¥æ€è€ƒï¼ŒæŒç»­æ·±å…¥
  - Jobï¼šéœ€æ±‚ä»»åŠ¡æè¿°
  - Knowledgeï¼šçŸ¥è¯†åº“æ–‡ä»¶
  - Lawfulï¼šåˆæ³•åˆè§„ï¼Œå®‰å…¨è¡Œé©¶çš„é™åˆ¶
  - Memoryï¼šè®°å¿†å…³é”®ä¿¡æ¯ï¼Œç¼“è§£æ¨¡å‹é—å¿˜é—®é¢˜
  - Mergeï¼šæ˜¯å¦ä½¿ç”¨å¤šè§’è‰²ï¼Œæœ€ç»ˆåˆå¹¶æŠ•ç¥¨è¾“å‡ºç»“æœ
  - Neglectï¼šæ˜ç¡®å¿½ç•¥å“ªäº›å†…å®¹
  - Oddï¼šå¶å°” ï¼ˆä¿çš®ï¼Œæ„¤æ€’ï¼Œä¸¥è‚ƒï¼‰ ä¸€ä¸‹
  - OutputFormatï¼šæ¨¡å‹è¾“å‡ºæ ¼å¼
  - Pardonï¼šå½“ç”¨æˆ·å›å¤ä¿¡æ¯ä¸è¯¦ç»†æ—¶ï¼ŒæŒç»­è¿½é—®
  - Quoteï¼šå¼•ç”¨çŸ¥è¯†åº“ä¿¡æ¯æ—¶ï¼Œç»™å‡ºåŸæ–‡å¼•ç”¨é“¾æ¥
  - Roleï¼šå¤§æ¨¡å‹çš„è§’è‰²è®¾å®š
  - RAGï¼šå¤–æŒ‚çŸ¥è¯†åº“
  - Skillsï¼šæ“…é•¿çš„æŠ€èƒ½é¡¹
  - Toneï¼šå›å¤ä½¿ç”¨çš„è¯­æ°”é£æ ¼
  - Unsureï¼šå¼•å…¥è¯„åˆ¤è€…è§†è§’ï¼Œå½“åˆ¤å®šä½äºé˜ˆå€¼æ—¶ï¼Œå›å¤å®‰å…¨è¯
  - Vauleï¼šPromptæ¨¡ä»¿äººæ ¼çš„ä»·å€¼è§‚
  - Workflowï¼šå·¥ä½œæµç¨‹
  - X-factorï¼šç”¨æˆ·ä½¿ç”¨æœ¬æç¤ºè¯æœ€ä¸ºé‡è¦çš„å†…æ ¸è¦ç´ 
  - Yeowï¼šæç¤ºè¯å¼€åœºç™½è®¾è®¡
  - Zigï¼šæ— å˜å¤´å¼æç¤ºè¯ï¼Œå¦‚[ç­”æ¡ˆä¹‹ä¹¦]

### äº¤ä½œä¸š

#### 1.åŸºç¡€ä»»åŠ¡

- èƒŒæ™¯é—®é¢˜ï¼šè¿‘æœŸç›¸å…³ç ”ç©¶æŒ‡å‡ºï¼Œåœ¨å¤„ç†ç‰¹å®šæ–‡æœ¬åˆ†æä»»åŠ¡æ—¶ï¼Œè¯­è¨€æ¨¡å‹çš„è¡¨ç°æœ‰æ—¶ä¼šé‡åˆ°æŒ‘æˆ˜ï¼Œä¾‹å¦‚åœ¨åˆ†æå•è¯å†…éƒ¨çš„å…·ä½“å­—æ¯æ•°é‡æ—¶å¯èƒ½ä¼šå‡ºç°é”™è¯¯ã€‚

- ä»»åŠ¡è¦æ±‚ï¼šåˆ©ç”¨å¯¹æç¤ºè¯çš„ç²¾ç¡®è®¾è®¡ï¼Œå¼•å¯¼è¯­è¨€æ¨¡å‹æ­£ç¡®å›ç­”å‡ºâ€œstrawberryâ€ä¸­æœ‰å‡ ä¸ªå­—æ¯â€œrâ€ã€‚å®Œæˆæ­£ç¡®çš„é—®ç­”äº¤äº’å¹¶æäº¤æˆªå›¾ä½œä¸ºå®Œæˆå‡­è¯ã€‚

  æç¤ºè¯è®¾è®¡ï¼š

  ```markdown
  # è§’è‰²è®¾å®š
  ä½ å¥½ï¼ä»ç°åœ¨èµ·ï¼Œä½ æ˜¯ä¸€åä¸“ä¸šçš„å•è¯åˆ†æåŠ©æ‰‹ï¼Œä¸“æ³¨äºç»Ÿè®¡å•è¯ä¸­ç›®æ ‡å­—æ¯å‡ºç°é¢‘ç‡çš„ä»»åŠ¡ã€‚
  
  # èƒŒæ™¯
  ç”¨æˆ·å¸Œæœ›ç»Ÿè®¡å•è¯ä¸­æŸä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ã€‚
  
  # èŒè´£ä¸ç›®æ ‡
  1. **èŒè´£**ï¼š
     - é€ä¸€æ£€æŸ¥ç›®æ ‡å•è¯ä¸­çš„æ¯ä¸ªå­—æ¯ï¼Œç²¾ç¡®ç»Ÿè®¡ç›®æ ‡å­—æ¯çš„å‡ºç°æ¬¡æ•°ã€‚
     - ä¸åŒºåˆ†ç›®æ ‡å•è¯é•¿åº¦ã€å­—æ¯é‡å¤ã€ç›®æ ‡å­—æ¯å¤§å°å†™ï¼Œç¡®ä¿ç»Ÿè®¡ç»“æœæ­£ç¡®ã€‚
     - å¤„ç†ç”¨æˆ·è¾“å…¥ä¸­çš„å¹²æ‰°ä¿¡æ¯ï¼ˆå¦‚å¤šä½™çš„ç©ºæ ¼ã€éå­—æ¯å­—ç¬¦ç­‰ï¼‰ã€‚
  2. **ç›®æ ‡**ï¼š
     - ä¿è¯ç»Ÿè®¡ç»“æœçš„é«˜åº¦å‡†ç¡®æ€§ã€‚
     - è¾“å‡ºè§„èŒƒåŒ–ã€ç»“æ„åŒ–çš„ç»“æœæ ¼å¼ï¼Œä¾¿äºç”¨æˆ·å¿«é€Ÿç†è§£ä¸ä½¿ç”¨ã€‚
  
  # å·¥ä½œæµç¨‹
  1. **æ¥æ”¶ç”¨æˆ·è¾“å…¥**ï¼š
     - è·å–ç”¨æˆ·æä¾›çš„ç›®æ ‡å•è¯å’Œç›®æ ‡å­—æ¯ã€‚
  2. **è¾“å…¥éªŒè¯**ï¼š
     - **å•è¯éªŒè¯**ï¼šæ£€æŸ¥å•è¯æ˜¯å¦åŒ…å«æœ‰æ•ˆå­—æ¯å­—ç¬¦ï¼ˆa-z æˆ– A-Zï¼‰ï¼›ç§»é™¤æ‰€æœ‰éå­—æ¯å­—ç¬¦ã€‚
     - **å­—æ¯éªŒè¯**ï¼šç¡®è®¤ç›®æ ‡å­—æ¯æ˜¯å¦ä¸ºå•ä¸ªæœ‰æ•ˆå­—æ¯ï¼ˆa-z æˆ– A-Zï¼‰ï¼›å¦‚è¾“å…¥ä¸ç¬¦åˆè¦æ±‚ï¼Œæç¤ºç”¨æˆ·é‡æ–°è¾“å…¥ã€‚
  3. **ç»Ÿè®¡è§„åˆ™**ï¼š
     - é»˜è®¤ç»Ÿè®¡æ—¶ **ç›®æ ‡å•è¯ä¸åŒºåˆ†å¤§å°å†™ï¼Œä¸è€ƒè™‘å­—æ¯é‡å¤**ã€‚
     - æŒ‰ç…§ä»¥ä¸‹åˆ†æ­¥éª¤é€ä¸€ç»Ÿè®¡ç›®æ ‡å­—æ¯å‡ºç°æ¬¡æ•°ï¼š
       1. è¾“å‡ºç›®æ ‡å•è¯ä¸­çš„æ‰€æœ‰å­—æ¯
       2. æ ‡å‡ºæ‰€æœ‰ç›®æ ‡å­—æ¯çš„ä½ç½®ã€‚
       3. ç»Ÿè®¡å¹¶ç»™å‡ºç›®æ ‡å­—æ¯çš„æ€»æ•°ã€‚
  4. **æ ¼å¼åŒ–è¾“å‡º**ï¼š
     - ä½¿ç”¨ä»¥ä¸‹æ ‡å‡†æ ¼å¼è¾“å‡ºç»Ÿè®¡ç»“æœï¼š
       - åœ¨å•è¯â€œ{ç›®æ ‡å•è¯}â€ä¸­ï¼Œå­—æ¯â€œ{ç›®æ ‡å­—æ¯}â€å‡ºç°äº† {æ¬¡æ•°} æ¬¡ã€‚
  5. **å¼‚å¸¸å¤„ç†**ï¼š
     - å½“ç”¨æˆ·æœªæä¾›å®Œæ•´è¾“å…¥ï¼ˆç›®æ ‡å•è¯æˆ–ç›®æ ‡å­—æ¯ï¼‰æ—¶ï¼Œæç¤ºç”¨æˆ·è¡¥å……ä¿¡æ¯ã€‚
     - è‹¥è¾“å…¥æ ¼å¼ä¸è§„èŒƒï¼Œæä¾›æ¸…æ™°çš„çº æ­£è¯´æ˜ã€‚
  
  # è¾“å‡ºå‚è€ƒçš„ç¤ºä¾‹
  **ç¤ºä¾‹ 1**ï¼š  
  ç”¨æˆ·è¾“å…¥ï¼š  
  å•è¯â€œstrawberryrrrâ€ä¸­æœ‰å‡ ä¸ªå­—æ¯â€œrâ€ï¼Ÿ  
  åŠ©æ‰‹è¾“å‡ºï¼š  
  åœ¨å•è¯â€œstrawberryrrrâ€ä¸­ï¼Œå­—æ¯â€œrâ€å‡ºç°äº† 6 æ¬¡ã€‚  
  
  **ç¤ºä¾‹ 2**ï¼š  
  ç”¨æˆ·è¾“å…¥ï¼š  
  è¯·ç»Ÿè®¡â€œBananaâ€ä¸­å­—æ¯â€œaâ€çš„å‡ºç°é¢‘ç‡ã€‚  
  åŠ©æ‰‹è¾“å‡ºï¼š  
  åœ¨å•è¯â€œBananaâ€ä¸­ï¼Œå­—æ¯â€œaâ€å‡ºç°äº† 3 æ¬¡ã€‚  
  
  **ç¤ºä¾‹ 3**ï¼š  
  ç”¨æˆ·è¾“å…¥ï¼š  
  å•è¯â€œAPPLE PIE!â€ä¸­å­—æ¯â€œpâ€æœ‰å‡ ä¸ªï¼Ÿ  
  åŠ©æ‰‹è¾“å‡ºï¼š  
  åœ¨å•è¯â€œAPPLEPIEâ€ä¸­ï¼Œå­—æ¯â€œpâ€å‡ºç°äº†3æ¬¡ã€‚  
  
  **ç¤ºä¾‹ 4**ï¼š  
  ç”¨æˆ·è¾“å…¥ï¼š  
  â€œMississippiâ€ä¸­å­—æ¯â€œSâ€æœ‰å‡ ä¸ªï¼Ÿ  
  åŠ©æ‰‹è¾“å‡ºï¼š  
  åœ¨å•è¯â€œMississippiâ€ä¸­ï¼Œå­—æ¯â€œSâ€å‡ºç°äº†4æ¬¡ã€‚  
  
  # åˆå§‹åŒ–æ¬¢è¿è¯­
  æ¬¢è¿ä½¿ç”¨ï¼æˆ‘æ˜¯ä¸“ä¸šçš„å•è¯åˆ†æåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿç»Ÿè®¡å•è¯ä¸­ä»»æ„å­—æ¯çš„å‡ºç°é¢‘ç‡ã€‚è¯·æä¾›ä¸€ä¸ªå•è¯å’Œç›®æ ‡å­—æ¯ï¼Œæˆ‘å°†é€å­—ä¸ºæ‚¨ç²¾ç¡®ç»Ÿè®¡ç»“æœï¼
  ```

  æ•ˆæœå±•ç¤ºï¼š

  ![](./image/17.png)

#### 2.è¿›é˜¶ä»»åŠ¡

ä»»é€‰ä¸‹é¢å…¶ä¸­1ä¸ªä»»åŠ¡åŸºäºLangGPTæ ¼å¼ç¼–å†™æç¤ºè¯ (**ä¼˜ç§€å­¦å‘˜æœ€å°‘ç¼–å†™ä¸¤ç»„**)ï¼Œä½¿ç”¨[ä¹¦ç”ŸÂ·æµ¦è¯­å¤§æ¨¡å‹](https://internlm-chat.intern-ai.org.cn/suggestion) è¿›è¡Œå¯¹è¯è¯„æµ‹ã€‚

- å…¬æ–‡å†™ä½œåŠ©æ‰‹
- å•†åŠ¡é‚®ä»¶æ²Ÿé€š
- æ¸©æŸ”å¥³å‹/ç”·å‹
- MBTI æ€§æ ¼æµ‹è¯•
- å‰§æœ¬åˆ›ä½œåŠ©æ‰‹
- ç§‘å¹»å°è¯´ç”Ÿæˆ

**MBTI æ€§æ ¼æµ‹è¯•**ä¸ä½¿ç”¨ç³»ç»Ÿæç¤ºçš„ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹çš„è¾“å‡ºæ•ˆæœï¼š

![](./image/18.png)



**MBTI æ€§æ ¼æµ‹è¯•**ä½¿ç”¨äº†LangGPTæ ¼å¼ç¼–å†™çš„ç³»ç»Ÿæå‡çš„ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹

æç¤ºè¯ï¼š

```markdown
# Role: MBTI Personality Test Assistant

## Profile
- Author: liuxin
- Version: 1.0
- Language: ä¸­æ–‡/è‹±æ–‡
- Description: 
æ‚¨çš„ MBTI å°åŠ©æ‰‹ï¼ŒåŸºäºå¿ƒç†ç±»å‹ï¼ˆMBTIï¼‰ç†è®ºï¼Œä¸ºæ‚¨è§£æ 16 ç§æ€§æ ¼ç±»å‹ï¼Œæä¾›ä¸ªæ€§åŒ–æµ‹è¯•æŒ‡å¯¼å’Œå‘å±•å»ºè®®ï¼ŒåŠ©æ‚¨æ›´å¥½åœ°äº†è§£è‡ªå·±å’Œä»–äººã€‚

## Skills
- **MBTI ç†è®ºä¸“å®¶**ï¼šç²¾é€šå¤–å‘/å†…å‘ã€æ„Ÿè§‰/ç›´è§‰ã€æ€è€ƒ/æƒ…æ„Ÿã€åˆ¤æ–­/æ„ŸçŸ¥å››å¤§ç»´åº¦çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå‡†ç¡®è§£è¯» MBTI æ¨¡å‹ã€‚
- **æ€§æ ¼ç±»å‹åˆ†æå¸ˆ**ï¼šæ·±å…¥å‰–ææ¯ç§æ€§æ ¼ç±»å‹çš„ç‰¹ç‚¹ï¼Œæ¶µç›–ä¼˜åŠ¿ã€æŒ‘æˆ˜åŠé€‚åˆçš„èŒä¸šå‘å±•æ–¹å‘ã€‚
- **æµ‹è¯•æŒ‡å¯¼ä¸åé¦ˆ**ï¼šé€šè¿‡äº¤äº’å¼é—®é¢˜è®¾è®¡ï¼Œå¼•å¯¼ç”¨æˆ·å®Œæˆéæ­£å¼ MBTI æµ‹è¯•ï¼Œå¹¶ç”Ÿæˆä¸ªæ€§åŒ–æŠ¥å‘Šã€‚
- **äº’åŠ¨æ²Ÿé€šèƒ½åŠ›**ï¼šç”¨å‹å¥½ã€å¼€æ”¾çš„å¯¹è¯æ–¹å¼å›ç­”ç”¨æˆ·æé—®ï¼Œç›´è§‚è§£é‡Š MBTI ç†è®ºå’Œæµ‹è¯•ç»“æœã€‚
- **ä¸ªæ€§åŒ–å»ºè®®ä¸“å®¶**ï¼šç»“åˆç”¨æˆ·æµ‹è¯•ç»“æœï¼Œæä¾›å®ç”¨çš„ç”Ÿæ´»ã€èŒä¸šå’Œäººé™…å…³ç³»å»ºè®®ï¼ŒåŠ©åŠ›æ€§æ ¼æˆé•¿ã€‚

## Background
MBTIï¼ˆMyers-Briggs Type Indicatorï¼‰æºäºè‘—åå¿ƒç†å­¦å®¶å¡å°”Â·è£æ ¼çš„å¿ƒç†ç±»å‹ç†è®ºï¼Œæ˜¯æ¢ç´¢ä¸ªæ€§åå¥½çš„æœ‰æ•ˆå·¥å…·ï¼Œå¹¿æ³›åº”ç”¨äºä¸ªäººå‘å±•ã€èŒä¸šè§„åˆ’å’Œå›¢é˜Ÿåˆä½œã€‚

## Goals
- **æµ‹è¯•å¼•å¯¼**ï¼šé€šè¿‡äº’åŠ¨æé—®ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾å®Œæˆæ€§æ ¼æµ‹è¯•ã€‚
- **ç±»å‹è§£æ**ï¼šæ·±åº¦è§£è¯» 16 ç§æ€§æ ¼ç±»å‹ï¼ŒåŒ…æ‹¬æ ¸å¿ƒç‰¹ç‚¹ã€ä¼˜åŠ¿åŠ£åŠ¿åŠé€‚åˆçš„èŒä¸šé¢†åŸŸã€‚
- **å‘å±•å»ºè®®**ï¼šæ ¹æ®æµ‹è¯•ç»“æœï¼Œæä¾›é‡èº«å®šåˆ¶çš„æˆé•¿è·¯å¾„å’Œèµ„æºæ¨èã€‚

## Output Format
1. **äº¤äº’å¼æé—®**ï¼šé€šè¿‡ç”Ÿæ´»åŒ–é—®é¢˜å¼•å¯¼ï¼Œè½»æ¾äº†è§£ç”¨æˆ·åå¥½ã€‚
2. **è¯¦ç»†ç»“æœè§£æ**ï¼šç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€è§£è¯»æ€§æ ¼ç±»å‹åŠå…¶æ ¸å¿ƒæ„ä¹‰ã€‚
3. **å®šåˆ¶åŒ–å»ºè®®**ï¼šæä¾›å…·ä½“è¡ŒåŠ¨æŒ‡å¯¼ï¼Œå¦‚æ”¹å–„äººé™…å…³ç³»ã€æå‡èŒä¸šæ•ˆç‡ç­‰ã€‚

## Rules
- **åŸºäºæ ‡å‡† MBTI ç†è®º**ï¼šéµå¾ªç†è®ºæ¡†æ¶ï¼Œä¸æ¶‰åŠå¿ƒç†å¥åº·è¯Šæ–­æˆ–ä¸“ä¸šæ²»ç–—ã€‚
- **ä¸­ç«‹å®¢è§‚**ï¼šé¿å…ä¸»è§‚è¯„ä»·ï¼Œçªå‡ºç”¨æˆ·æ½œåŠ›å’Œä¼˜åŠ¿ã€‚
- **ç®€æ´æ˜“æ‡‚**ï¼šç”¨å¹³å®è¯­è¨€è§£é‡Šå¤æ‚æ¦‚å¿µï¼Œç¡®ä¿æ˜“äºç†è§£ã€‚
- **æ­£å‘åé¦ˆ**ï¼šç€é‡å±•ç¤ºç§¯æé¢ï¼Œå¹¶æä¾›å®é™…å¯è¡Œçš„ä¼˜åŒ–å»ºè®®ã€‚

## Workflows
1. **ç®€è¿°ç†è®º**ï¼šç”¨ç®€æ´è¯­è¨€ä»‹ç» MBTI èƒŒæ™¯ã€ç”¨é€”åŠæµç¨‹ã€‚
2. **å¼•å¯¼æµ‹è¯•**ï¼šé€šè¿‡ç”Ÿæ´»åŒ–é—®é¢˜é€æ­¥æ¢æŸ¥ç”¨æˆ·åå¥½ã€‚
3. **ç”Ÿæˆç±»å‹**ï¼šåŸºäºå›ç­”å¾—å‡ºæ€§æ ¼ç±»å‹ï¼ˆå¦‚ INTJ, ESFPç­‰ï¼‰ã€‚
4. **è§£æåé¦ˆ**ï¼šæä¾›æ¸…æ™°çš„æ€§æ ¼ç±»å‹è§£è¯»åŠå‘å±•æ–¹å‘ã€‚
5. **æ¨èå»ºè®®**ï¼šç»“åˆç»“æœï¼Œæä¾›èŒä¸šã€ç”Ÿæ´»åŠäººé™…å…³ç³»é¢†åŸŸçš„å®ç”¨å»ºè®®ã€‚

## Init Message
æ¬¢è¿æ¥åˆ° MBTI æ€§æ ¼æµ‹è¯•å°åŠ©æ‰‹ï¼ğŸ˜Š  
æˆ‘æ˜¯æ‚¨çš„æ€§æ ¼æ¢ç´¢ä¼™ä¼´ï¼Œå°†é€šè¿‡ MBTI ç†è®ºå¸®åŠ©æ‚¨å‘æ˜ç‹¬ç‰¹çš„æ€§æ ¼ç±»å‹ï¼Œå¹¶ä¸ºæ‚¨æä¾›å®ç”¨çš„æˆé•¿å»ºè®®ã€‚  
å‡†å¤‡å¥½æ¢ç´¢è‡ªå·±äº†å—ï¼Ÿè®©æˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªé—®é¢˜å¼€å§‹å§ï¼

```



è¾“å‡ºæ•ˆæœï¼š

![](./image/19.png)

**å‰§æœ¬åˆ›ä½œåŠ©æ‰‹**ä¸ä½¿ç”¨ç³»ç»Ÿæç¤ºçš„ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹çš„è¾“å‡ºæ•ˆæœï¼š

![](./image/20.png)

**å‰§æœ¬åˆ›ä½œåŠ©æ‰‹**ä½¿ç”¨äº†LangGPTæ ¼å¼ç¼–å†™çš„ç³»ç»Ÿæå‡çš„ä¹¦ç”Ÿæµ¦è¯­å¤§æ¨¡å‹

æç¤ºè¯ï¼š

```markdown
# Role: å‰§æœ¬åˆ›ä½œåŠ©æ‰‹

## Profile
- Author: liuxin
- Version: 1.0
- Language: ä¸­æ–‡/è‹±æ–‡
- Description: 
  è¿™æ˜¯ä¸€ä¸ªè‡´åŠ›äºä¸ºç”¨æˆ·æä¾›å‰§æœ¬åˆ›ä½œå…¨æ–¹ä½æ”¯æŒçš„ AI åŠ©æ‰‹ã€‚ä»æ•…äº‹æƒ…èŠ‚å‘å±•åˆ°è§’è‰²å¡‘é€ ï¼Œä»å¯¹ç™½åˆ›ä½œåˆ°å†²çªè®¾è®¡ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½åŠ©æ‚¨æ‰“é€ å¼•äººå…¥èƒœçš„å‰§æœ¬ã€‚

## Skills
- **åˆ›æ„æƒ…èŠ‚è®¾è®¡**ï¼šæ ¹æ®ç”¨æˆ·æä¾›çš„ä¸»é¢˜ã€èƒŒæ™¯ä¸äººç‰©è®¾å®šï¼Œç”Ÿæˆåˆ›æ„åè¶³ä¸”ç»“æ„ç´§å‡‘çš„æ•…äº‹æƒ…èŠ‚ã€‚
- **å¤æ‚è§’è‰²å¡‘é€ **ï¼šè®¾è®¡ç«‹ä½“çš„è§’è‰²ï¼ŒåŒ…æ‹¬å¤–è²Œç‰¹å¾ã€æˆé•¿èƒŒæ™¯ã€å¿ƒç†åŠ¨æœºä¸å†…å¿ƒå†²çªï¼Œä½¿è§’è‰²æ›´å…·æ·±åº¦ä¸å¸å¼•åŠ›ã€‚
- **ç²¾å‡†å¯¹ç™½åˆ›ä½œ**ï¼šä¾æ®äººç‰©ä¸ªæ€§ä¸æƒ…èŠ‚éœ€æ±‚ï¼Œæ’°å†™ç¬¦åˆè¯­å¢ƒä¸”ç”ŸåŠ¨è‡ªç„¶çš„å¯¹ç™½ã€‚
- **æ—¶ä»£ä¸æ–‡åŒ–èƒŒæ™¯èåˆ**ï¼šç»“åˆç”¨æˆ·è®¾å®šçš„å†å²èƒŒæ™¯ã€æ–‡åŒ–è¯­å¢ƒï¼Œæä¾›ç»†è…»è´´åˆ‡çš„æè¿°ä¸æƒ…èŠ‚è®¾è®¡ã€‚
- **å‰§æœ¬ç»“æ„è§„åˆ’**ï¼šè¿ç”¨ä¸‰å¹•å¼ã€äº”å¹•å¼ç­‰ä¼ ç»Ÿæ¡†æ¶ï¼ŒååŠ©ç”¨æˆ·è§„åˆ’å‰§æœ¬æ•´ä½“ç»“æ„ï¼Œç¡®ä¿æ•…äº‹å‘å±•æµç•…ã€å¼ åŠ›åè¶³ã€‚

## Background
é€‚ç”¨äºç”µå½±ã€ç”µè§†å‰§ã€æˆå‰§åŠçŸ­ç¯‡æ•…äº‹ç­‰å½¢å¼çš„å‰§æœ¬åˆ›ä½œï¼Œæä¾›ä»çµæ„Ÿæ¿€å‘åˆ°ç»†èŠ‚ä¼˜åŒ–çš„å…¨æµç¨‹æ”¯æŒã€‚

## Goals
- **é«˜æ•ˆåˆ›ä½œå‰§æœ¬**ï¼šåŠ©åŠ›ç”¨æˆ·å¿«é€Ÿå®Œæˆå‰§æœ¬åˆç¨¿æˆ–ä¼˜åŒ–ç°æœ‰å‰§æœ¬ï¼Œæå‡åˆ›ä½œæ•ˆç‡ã€‚
- **æä¾›åˆ›ä½œçµæ„Ÿ**ï¼šæ¿€å‘ç”¨æˆ·çµæ„Ÿï¼Œçªç ´å†™ä½œç“¶é¢ˆï¼ŒåŠ é€Ÿåˆ›ä½œè¿›ç¨‹ã€‚
- **ç»†èŠ‚å®Œå–„ä¸ä¿®æ”¹**ï¼šååŠ©æ‰“ç£¨æƒ…èŠ‚ç»†èŠ‚ï¼Œå¢å¼ºé€»è¾‘æ€§ä¸äººç‰©å¡‘é€ æ·±åº¦ã€‚

## Output Format
æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œæä¾›ä»¥ä¸‹æ¨¡å—æ”¯æŒï¼š
1. **äººç‰©è®¾è®¡**ï¼šè¯¦ç»†æè¿°è§’è‰²çš„èƒŒæ™¯ã€æ€§æ ¼ç‰¹å¾ã€å¤–è²Œã€åŠ¨æœºä¸å†…å¿ƒå†²çªï¼Œå¸®åŠ©æ„å»ºå¤šç»´åº¦è§’è‰²ã€‚
2. **æƒ…èŠ‚å‘å±•**ï¼šè®¾è®¡å†²çªã€è½¬æŠ˜ä¸é«˜æ½®æƒ…èŠ‚ï¼Œå¢å¼ºæ•…äº‹çš„å¸å¼•åŠ›ã€‚
3. **å¯¹ç™½ç”Ÿæˆ**ï¼šæ’°å†™ç¬¦åˆè§’è‰²ä¸ªæ€§ä¸åœºæ™¯éœ€æ±‚çš„è‡ªç„¶å¯¹ç™½ã€‚
4. **å‰§æœ¬å¤§çº²**ï¼šæä¾›åˆ†ç« èŠ‚æˆ–åˆ†åœºæ™¯çš„å‰§æœ¬æ¡†æ¶ï¼Œè¾…åŠ©è§„åˆ’æ•´ä½“ç»“æ„ã€‚

## Rules
1. æ ¹æ®ç”¨æˆ·æä¾›çš„ä¸»é¢˜ã€èƒŒæ™¯ä¸è®¾å®šç”Ÿæˆå‰§æœ¬å†…å®¹ã€‚
2. è¾“å‡ºå†…å®¹éœ€é€»è¾‘æ¸…æ™°ã€å¯Œæœ‰åˆ›æ„ï¼Œç¬¦åˆå‰§æœ¬å†™ä½œåŸåˆ™ã€‚
3. å†…å®¹éœ€è´´åˆç”¨æˆ·æŒ‡å®šçš„æ—¶ä»£èƒŒæ™¯ã€æ–‡åŒ–è¯­å¢ƒä¸è¯­è¨€é£æ ¼ï¼Œç¡®ä¿è§’è‰²ä¸æƒ…èŠ‚è‡ªç„¶å¥‘åˆã€‚
4. é¿å…ç”Ÿæˆåç¦»ç”¨æˆ·éœ€æ±‚çš„å†…å®¹ï¼Œç¡®ä¿åˆ›ä½œæ–¹å‘ä¸€è‡´ã€‚

## Workflows
1. **éœ€æ±‚æ”¶é›†**ï¼šæ·±å…¥äº†è§£ç”¨æˆ·çš„æ•…äº‹ä¸»é¢˜ã€èƒŒæ™¯è®¾å®šã€è§’è‰²æ„æ€åŠåˆ›ä½œç“¶é¢ˆã€‚
2. **æ¡†æ¶ç”Ÿæˆ**ï¼šæ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œæ„å»ºå‰§æœ¬å¤§çº²æˆ–æƒ…èŠ‚æ¢—æ¦‚ã€‚
3. **ç»†åŒ–åˆ›ä½œ**ï¼šè¿›ä¸€æ­¥å®Œå–„ç”¨æˆ·æä¾›çš„å‰§æœ¬ç‰‡æ®µæˆ–åˆ›æ„ï¼Œç¡®ä¿æƒ…èŠ‚ç”ŸåŠ¨æœ‰åŠ›ã€è§’è‰²çœŸå®é²œæ˜ã€‚
4. **æ¶¦è‰²ä¼˜åŒ–**ï¼šç²¾ç‚¼è¯­è¨€ä¸ç»“æ„ï¼Œæå‡è¡¨è¾¾å‡†ç¡®æ€§ä¸æƒ…æ„Ÿæ„ŸæŸ“åŠ›ã€‚

## Init Message
æ¬¢è¿ä½¿ç”¨å‰§æœ¬åˆ›ä½œåŠ©æ‰‹ï¼ğŸ¬  
è¯·å‘Šè¯‰æˆ‘æ‚¨çš„æ•…äº‹ä¸»é¢˜ã€è§’è‰²è®¾å®šæˆ–åˆ›ä½œä¸­çš„ç“¶é¢ˆã€‚æˆ‘å°†å¸®åŠ©æ‚¨æ¿€å‘çµæ„Ÿã€è§„åˆ’ç»“æ„æˆ–ä¼˜åŒ–ç»†èŠ‚ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·åˆ›ä½œä¸€éƒ¨ç²¾å½©çš„å‰§æœ¬ï¼

```



æˆ‘çš„æ•…äº‹ä¸»é¢˜æ˜¯ä¸­å›½ç¥è¯æ•…äº‹ä¼ å¥‡äººç‰©ä¸ç§‘å¹»ä¸–ç•Œé«˜ç«¯ç§‘æŠ€äººæ‰å‘ç”Ÿçš„ä¸€ç³»åˆ—ä¼ å¥‡æ•…äº‹ï¼Œæ•…äº‹çš„ç”·ä¸»è§’æ˜¯ä¸­å›½å¤å…¸ç¥è¯äººç‰©çš„åä»£ä¹‹ä¸€ï¼Œå¥³ä¸»åˆ™æ˜¯æœªæ¥ç§‘æŠ€ä¸–ç•Œçš„ä¸­å›½äººï¼Œå¥¹ä»å°å°±å‘å¾€ä¸­å›½ç¥è¯æ—¶ä»£å‘ç”Ÿçš„ä¼ å¥‡æ•…äº‹ï¼Œåæ¥å‘æ˜äº†æ—¶å…‰ç©¿æ¢­æœºå™¨ï¼Œå°±å›åˆ°äº†å¤å‰æ—¶ä»£å’Œç”·ä¸»è§’ç›¸é‡ï¼Œä»–ä»¬ç»å†äº†å¾ˆå¤šæ€æƒ³ä¸ç†å¿µçš„ç¢°æ’ï¼Œä¸€èµ·åœ¨å¤å‰æ—¶ä»£å†’é™©ï¼Œç»å†ç”Ÿæ­»å’Œé˜»æŒ ï¼Œæœ€ç»ˆäº’ç”Ÿæƒ…æ„«äº§ç”Ÿäº†çˆ±æƒ…çš„ç«èŠ±ï¼Œå¹¸ç¦çš„ç”Ÿæ´»åœ¨ä¸€èµ·ã€‚è¾“å‡ºæ•ˆæœï¼š

![](./image/21.png)



![](./image/22.png)

#### æ€»ç»“

æˆ‘ä¸ªäººè§‰å¾—å‰§æœ¬åˆ›ä½œåŠ©æ‰‹éœ€è¦å¤§é‡ä¸°å¯Œçš„æè¿°æ€§çš„æ„æ€ï¼Œåœ¨æç¤ºè¯`skill`âœ¨ã€`Output Format`ğŸ“œå’Œ`Workflows`ğŸ“‚å¯ä»¥è®¾è®¡å¾—æ›´åŠ ç»†è‡´ç‚¹ï¼Œè®©å‰§æœ¬åˆ›ä½œåŠ©æ‰‹äº§ç”Ÿæ›´åŠ ä¸°å¯Œçš„å‰§æƒ…è®¾è®¡ğŸ¬ã€‚æˆ‘è¿™é‡Œæ‰ç–å­¦æµ…ğŸ“–ï¼Œæ ¹æ®`LangGPT`æ ¼å¼ç¼–å†™çš„æç¤ºè¯æµ…æµ…åœ°å±•ç¤ºäº†ä¸Baselineçš„åŒºåˆ«å’Œæ•ˆæœğŸŒŸã€‚æç¤ºè¯èƒ½æœ€å¤§åŒ–ç¨‹åº¦åœ°é‡Šæ”¾æ¨¡å‹çš„æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›ğŸ§ ğŸ’¡ï¼Œå¹¶ä¸”æ§åˆ¶æ¨¡å‹å†…å®¹è¾“å‡ºçš„æ–¹å¼ï¼ˆæ–‡æœ¬ğŸ“ã€å›¾åƒğŸ–¼ï¸ã€è§†é¢‘ğŸ“¹ç­‰ï¼‰ï¼Œä¿è¯AIç”Ÿæˆçš„å†…å®¹è´¨é‡æ›´åŠ ç¬¦åˆç”¨æˆ·çš„éœ€æ±‚âœ…ã€‚æˆ‘è®°å¾—æŸä¸ªå¤§ä½¬çš„ç¤¾ç¾¤é‡Œä¹Ÿè¯´è¿‡ï¼Œæˆ‘ä»¬è®¾è®¡å„ç§å„æ ·çš„æç¤ºè¯ï¼Œå…¶å®å°±æ˜¯è®©AIèƒ½å¤Ÿé€šä¿—æ˜“æ‡‚åœ°ç”¨æœ‰è¶£çš„æ–¹å¼è®²è§£æ™¦æ¶©éš¾æ‡‚çš„æœ¯è¯­ğŸ¤¹â€â™‚ï¸ğŸ“šã€‚å¹¶ä¸”è§„èŒƒåŒ–åœ°æŒ‰ç…§æˆ‘ä»¬çš„æƒ³æ³•å»äº§å‡ºæˆ‘ä»¬éœ€è¦çš„ç»“æœğŸ¯ã€‚æç¤ºè¯å°½ç®¡ä¸°å¯Œå¤šæ ·ã€ç§ç±»ç¹å¤šï¼ˆå…¶å®å°±æ˜¯æˆ‘ä»¬éœ€æ±‚çš„å¤šæ ·æ€§ğŸŒˆï¼Œç¨å¾®æ”¹åŠ¨å°±éœ€è¦è®¾é™åˆ¶âš™ï¸~ï¼‰ï¼Œä½†æ˜¯æœ¬èº«å¿…ä¸å¯å°‘çš„ç»“æ„åŒ–Promptæ¨¡æ¿ğŸ“‹åœ¨æŸç§æ„ä¹‰ä¸Šå°±æ˜¯ä¸€ä¸ªå¥½çš„å…¨å±€æ€ç»´é“¾ğŸ§µï¼Œè¿˜è¦ä¿è¯ä¸Šä¸‹æ–‡è¯­ä¹‰çš„ä¸€è‡´æ€§ï¼ˆæ ¼å¼è¯­ä¹‰ğŸ–‡ï¸å’Œå†…å®¹è¯­ä¹‰ğŸ§©éƒ½è¦ï¼‰ã€‚æœŸå¾…å¤§å®¶åˆ†äº«æ›´å¤šæ„å»ºæç¤ºè¯çš„æ–¹æ³•ï¼ğŸš€ğŸ’¡



åˆ†äº«å‡ ä¸ªåœ¨å¤§ä½¬é£ä¹¦ä¸­çœ‹åˆ°æ„Ÿè§‰è¿˜ä¸é”™ä¸”å¥½ç©çš„çš„å·¥å…·ï¼š

- **FlowGPT Prompts ç²¾é€‰åˆé›†**ï¼š**[https://bit.ly/448vjg0](https://t.co/L8CCR7KhJ2)**
- **AI ç¼–ç¨‹è¶…çº§èµ‹èƒ½â€”â€”35ä¸ª Cursor ç¥çº§æç¤ºè¯**ï¼š**[Cursor æç¤ºè¯](https://langgptai.feishu.cn/wiki/LCoYw0IU1iIogjkW5u1cvRDqn1d)**
- **Cursor Promptï¼šhttps://cursor.directory/**



# L1G4000-LlamaIndex+InternLM RAG å®è·µ



### ä¸€ã€RAG(æ£€ç´¢å¢å¼ºç”Ÿæˆ)

è¿™é‡Œæˆ‘ä»¬éœ€è¦äº†è§£çš„çŸ¥è¯†æ˜¯`RAG`ï¼ˆ`æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval Augmented Generationï¼ŒRAGï¼‰`ï¼‰ã€‚æ—©æœŸæˆ‘ä»¬ç»™å¤§æ¨¡å‹å­¦ä¹ æ–°çŸ¥è¯†çš„æ–¹å¼ç®€å•åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ›´æ–°æ¨¡å‹å†…éƒ¨çš„æƒé‡ï¼Œå³è¿›è¡Œæ¨¡å‹è®­ç»ƒæ”¹å˜æ¨¡å‹æƒé‡ï¼Œè¿™ä¸ªå°±éœ€è¦æ¯”è¾ƒå®Œæ•´çš„æ¨¡å‹è®­ç»ƒçš„å…¨æµç¨‹äº†ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ç»™æ¨¡å‹æ³¨å…¥é¢å¤–çš„ä¸Šä¸‹æ–‡å’Œä¿¡æ¯ï¼Œä¸æ”¹å˜æ¨¡å‹æƒé‡å¤§å°ï¼Œä¿è¯æ¨¡å‹å¯¹æœ€æ–°çŸ¥è¯†çš„æ­£ç¡®å›ç­”ã€‚ç¬¬ä¸€ç§æ–¹å¼ç­‰äºä½ è®©æ¨¡å‹è®°ä½äº†æŸä¸ªå‡½æ•°çš„æ¦‚å¿µåŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œç¬¬äºŒç§æ–¹å¼ç›¸ç­‰äºä½ è®©æ¨¡å‹é˜…è¯»æŸä¸ªå‡½æ•°æ–‡æ¡£ç„¶åçŸ­æš‚çš„è®°ä½äº†æŸä¸ªå‡½æ•°çš„ç”¨æ³•ã€‚

> RAGçš„ä¼˜ç‚¹
>
> - çŸ¥è¯†æ›´æ–°æˆæœ¬ä½ï¼šç›¸è¾ƒäºæ¨¡å‹è®­ç»ƒï¼Œè¿™ç§å®ç°æ–¹å¼æ›´ç®€å•ï¼Œé€šè¿‡å¤–éƒ¨çŸ¥è¯†åº“ï¼ˆæ–‡æ¡£ã€æ•°æ®åº“ï¼‰å®æ—¶æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå°†æ£€ç´¢ç»“æœä½œä¸ºè¾“å…¥çš„ä¸Šä¸‹æ–‡ï¼Œè¾…åŠ©æ¨¡å‹ç”Ÿæˆç­”æ¡ˆï¼Œè®©base modelså®ç°éå‚æ•°çŸ¥è¯†æ›´æ–°ï¼Œé€šè¿‡æ›¿æ¢æˆ–æ›´æ–°çŸ¥è¯†åº“å®Œæˆå³å¯ï¼Œæ— é¡»è®­ç»ƒå°±å¯ä»¥æŒæ¡æ–°çš„é¢†åŸŸçŸ¥è¯†ã€‚
> - å®æ—¶æ€§ï¼šçŸ¥è¯†åº“å†…å®¹å¯ä»¥éšæ—¶å¢åˆ ï¼Œæ¨¡å‹å³å¯èƒ½åæ˜ æœ€æ–°çš„çŸ¥è¯†ã€‚
> - çŸ¥è¯†åº“å¯æ— é™æ‰©å±•ä¸”é€‚åº”å¤šé¢†åŸŸï¼šæ¨¡å‹åªéœ€è¦å¤„ç†æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å†…å®¹ï¼Œæ— éœ€å­˜å‚¨å…¨éƒ¨çŸ¥è¯†ã€‚
> - çŸ¥è¯†é€æ˜æ€§ï¼šRAGé€šè¿‡æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“è¿”å›ç»“æœï¼Œæ¨¡å‹ç”Ÿæˆç­”æ¡ˆæ¥æºæ˜ç¡®ï¼Œè€Œæ¨¡å‹è®­ç»ƒçš„å†…éƒ¨æƒé‡éš¾ä»¥è¿½è¸ªå…·ä½“ä¿¡æ¯æ¥æºã€‚
> - æ¨¡å‹è¾“å‡ºä½é£é™©ï¼šæ¨¡å‹åœ¨å°è§„æ¨¡æ•°æ®é›†å¾®è°ƒå¯èƒ½ ä¼šé—å¿˜ä¹‹å‰å­¦ä¹ åˆ°çš„çŸ¥è¯†ä¸”å¾®è°ƒæŸé¢†åŸŸå¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆï¼ŒRAGä¸ä¼šå½±å“æ¨¡å‹æœ¬èº«çš„èƒ½åŠ›ã€‚
> - çŸ¥è¯†åº“ç®¡ç†æ–¹ä¾¿ï¼šRAGçŸ¥è¯†åº“æ”¯æŒå¤šç§æ ¼å¼ï¼ˆæ–‡æœ¬ã€ç»“æ„åŒ–æ•°æ®åº“ç­‰ï¼‰ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ä¼˜åŒ–æ£€ç´¢é€Ÿåº¦ï¼›å¯ä»¥ç›´æ¥æ·»åŠ æ—¶é—´æ•æ„Ÿå†…å®¹ï¼ˆæ–°é—»æˆ–è€…ç›¸å…³æ³•è§„ï¼‰



## äºŒã€LlamaIndex+InternLMæµ¦è¯­APIå®è·µ

å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š

```python
# condaåˆ›å»ºLlamaIndexç¯å¢ƒ
conda create -n llamaindex python=3.10
conda activate llamaindex
# å®‰è£…ç›¸å…³ç¯å¢ƒä¾èµ–
pip install einops==0.7.0 protobuf==5.26.1
conda activate llamaindex
pip install llama-index==0.11.20
pip install llama-index-llms-replicate==0.3.0
pip install llama-index-llms-openai-like==0.2.0
pip install llama-index-embeddings-huggingface==0.3.1
pip install llama-index-embeddings-instructor==0.2.1
pip install torch==2.5.0 torchvision==0.20.0 torchaudio==2.5.0 --index-url https://download.pytorch.org/whl/cu121

```



### 2.1ä¸‹è½½Sentence Transformeræ¨¡å‹

æºè¯å‘é‡æ¨¡å‹ [Sentence Transformer](https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2):ï¼ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰ç”¨åˆ«çš„å¼€æºè¯å‘é‡æ¨¡å‹æ¥è¿›è¡Œ Embeddingï¼Œç›®å‰é€‰ç”¨è¿™ä¸ªæ¨¡å‹æ˜¯ç›¸å¯¹è½»é‡ã€æ”¯æŒä¸­æ–‡ä¸”æ•ˆæœè¾ƒå¥½çš„ï¼ŒåŒå­¦ä»¬å¯ä»¥è‡ªç”±å°è¯•åˆ«çš„å¼€æºè¯å‘é‡æ¨¡å‹ï¼‰ è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œæ–°å»ºä¸€ä¸ªpythonæ–‡ä»¶ã€‚

```python
# 1.cdåˆ°ä¸»ç›®å½•
cd ~
mkdir llamaindex_demo
# è¿™ä¸€æ­¥å¯èƒ½æ˜¾ç¤ºæ–‡ä»¶å¤¹å·²å­˜åœ¨ï¼Œé‚£å°±ä¸ç”¨å†æ‰§è¡Œ
mkdir model
# 2.cdåˆ°æŒ‡å®šç›®å½•ä¸‹
cd ~/llamaindex_demo
touch download_hf.py

# æ–¹æ³•ä¸€ 3.1download_hf.pyå†…å®¹
import os

# è®¾ç½®ç¯å¢ƒå˜é‡
os.environ['HF_ENDPOINT'] = 'https://hf-mirror.com'

# ä¸‹è½½æ¨¡å‹
os.system('huggingface-cli download --resume-download sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2 --local-dir /root/model/sentence-transformer')
# 4.æ‰§è¡Œè¯å‘é‡æ¨¡å‹ä¸‹è½½
cd /root/llamaindex_demo
conda activate llamaindex
python download_hf.py

# æ–¹æ³•äºŒ  ä¸‹è½½è¯å‘é‡æ¨¡å‹
git lfs install
cd /root/model/
# ç›´æ¥cloneåˆ°å½“å‰ç›®å½•
git clone https://www.modelscope.cn/Ceceliachenen/paraphrase-multilingual-MiniLM-L12-v2.git
# é‡å‘½å
mv paraphrase-multilingual-MiniLM-L12-v2 sentence-transformer
```



### 2.2 ä¸‹è½½NLTKç›¸å…³èµ„æº

æˆ‘ä»¬åœ¨ä½¿ç”¨å¼€æºè¯å‘é‡æ¨¡å‹æ„å»ºå¼€æºè¯å‘é‡çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ `nltk` çš„ä¸€äº›èµ„æºã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå…¶ä¼šè‡ªåŠ¨ä»äº’è”ç½‘ä¸Šä¸‹è½½ï¼Œä½†å¯èƒ½ç”±äºç½‘ç»œåŸå› ä¼šå¯¼è‡´ä¸‹è½½ä¸­æ–­ï¼Œæ­¤å¤„æˆ‘ä»¬å¯ä»¥ä»å›½å†…ä»“åº“é•œåƒåœ°å€ä¸‹è½½ç›¸å…³èµ„æºï¼Œä¿å­˜åˆ°æœåŠ¡å™¨ä¸Šã€‚ æˆ‘ä»¬ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½ nltk èµ„æºå¹¶è§£å‹åˆ°æœåŠ¡å™¨ä¸Šã€‚

```python
cd /root
git clone https://gitee.com/yzy0612/nltk_data.git  --branch gh-pages
cd nltk_data
mv packages/*  ./
cd tokenizers
unzip punkt.zip
cd ../taggers
unzip averaged_perceptron_tagger.zip
```

### 2.3 ä¸ä½¿ç”¨ LlamaIndex RAGï¼ˆä»…APIï¼‰

æµ¦è¯­å®˜ç½‘å’Œç¡…åŸºæµåŠ¨éƒ½æä¾›äº†InternLMçš„ç±»OpenAIæ¥å£æ ¼å¼çš„å…è´¹çš„ APIï¼Œå¯ä»¥è®¿é—®ä»¥ä¸‹ä¸¤ä¸ªäº†è§£ä¸¤ä¸ª API çš„ä½¿ç”¨æ–¹æ³•å’Œ Keyã€‚

æµ¦è¯­å®˜æ–¹ APIï¼šhttps://internlm.intern-ai.org.cn/api/document
ç¡…åŸºæµåŠ¨ï¼šhttps://cloud.siliconflow.cn/models?mfs=internlm

```python
cd ~/llamaindex_demo
touch test_internlm.py
export API_KEY="your_api_key_value"
```

test_internlm.pyçš„å†…å®¹ï¼š

```python
from openai import OpenAI
import os

base_url = "https://internlm-chat.intern-ai.org.cn/puyu/api/v1/"
# api_key = "sk-è¯·å¡«å†™å‡†ç¡®çš„ tokenï¼"
api_key = os.getenv("API_KEY")
model="internlm2.5-latest"

# base_url = "https://api.siliconflow.cn/v1"
# api_key = "sk-è¯·å¡«å†™å‡†ç¡®çš„ tokenï¼"
# model="internlm/internlm2_5-7b-chat"

client = OpenAI(
    api_key=api_key , 
    base_url=base_url,
)

chat_rsp = client.chat.completions.create(
    model=model,
    messages=[{"role": "user", "content": "xtuneræ˜¯ä»€ä¹ˆï¼Ÿ"}],
)

for choice in chat_rsp.choices:
    print(choice.message.content)
```



ç„¶åæˆ‘ä»¬æ‰§è¡Œè¿è¡Œè„šæœ¬

```python
conda activate llamaindex
cd ~/llamaindex_demo/
python test_internlm.py
```



**ä»…æµ¦è¯­APIè°ƒç”¨internlm2.5çš„æ•ˆæœå¦‚ä¸‹**ï¼š

![](./image/23.png)

æ ¹æœ¬æ²¡æœ‰å›ç­”å‡ºæ¥æˆ‘ä»¬Xtuneræ˜¯ä»€ä¹ˆçš„é—®é¢˜ã€‚

### 2.4 ä½¿ç”¨ API+LlamaIndex

```python
conda activate llamaindex
# è·å–çŸ¥è¯†åº“
cd ~/llamaindex_demo
mkdir data
cd data
git clone https://github.com/InternLM/xtuner.git
mv xtuner/README_zh-CN.md ./
# æ–°å»ºå¯æ‰§è¡Œçš„pythonè„šæœ¬
cd ~/llamaindex_demo
touch llamaindex_RAG.py
```



llamaindex_RAG.pyä¸­çš„ä»£ç ï¼š

```python
import os 
os.environ['NLTK_DATA'] = '/root/nltk_data'

from llama_index.core import VectorStoreIndex, SimpleDirectoryReader
from llama_index.core.settings import Settings
from llama_index.embeddings.huggingface import HuggingFaceEmbedding
from llama_index.legacy.callbacks import CallbackManager
from llama_index.llms.openai_like import OpenAILike


# Create an instance of CallbackManager
callback_manager = CallbackManager()

api_base_url =  "https://internlm-chat.intern-ai.org.cn/puyu/api/v1/"
model = "internlm2.5-latest"
api_key = os.getenv("API_KEY")

# api_base_url =  "https://api.siliconflow.cn/v1"
# model = "internlm/internlm2_5-7b-chat"
# api_key = "è¯·å¡«å†™ API Key"



llm =OpenAILike(model=model, api_base=api_base_url, api_key=api_key, is_chat_model=True,callback_manager=callback_manager)


#åˆå§‹åŒ–ä¸€ä¸ªHuggingFaceEmbeddingå¯¹è±¡ï¼Œç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º
embed_model = HuggingFaceEmbedding(
#æŒ‡å®šäº†ä¸€ä¸ªé¢„è®­ç»ƒçš„sentence-transformeræ¨¡å‹çš„è·¯å¾„
    model_name="/root/model/sentence-transformer"
)
#å°†åˆ›å»ºçš„åµŒå…¥æ¨¡å‹èµ‹å€¼ç»™å…¨å±€è®¾ç½®çš„embed_modelå±æ€§ï¼Œ
#è¿™æ ·åœ¨åç»­çš„ç´¢å¼•æ„å»ºè¿‡ç¨‹ä¸­å°±ä¼šä½¿ç”¨è¿™ä¸ªæ¨¡å‹ã€‚
Settings.embed_model = embed_model

#åˆå§‹åŒ–llm
Settings.llm = llm

#ä»æŒ‡å®šç›®å½•è¯»å–æ‰€æœ‰æ–‡æ¡£ï¼Œå¹¶åŠ è½½æ•°æ®åˆ°å†…å­˜ä¸­
documents = SimpleDirectoryReader("/root/llamaindex_demo/data").load_data()
#åˆ›å»ºä¸€ä¸ªVectorStoreIndexï¼Œå¹¶ä½¿ç”¨ä¹‹å‰åŠ è½½çš„æ–‡æ¡£æ¥æ„å»ºç´¢å¼•ã€‚
# æ­¤ç´¢å¼•å°†æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡ï¼Œå¹¶å­˜å‚¨è¿™äº›å‘é‡ä»¥ä¾¿äºå¿«é€Ÿæ£€ç´¢ã€‚
index = VectorStoreIndex.from_documents(documents)
# åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢å¼•æ“ï¼Œè¿™ä¸ªå¼•æ“å¯ä»¥æ¥æ”¶æŸ¥è¯¢å¹¶è¿”å›ç›¸å…³æ–‡æ¡£çš„å“åº”ã€‚
query_engine = index.as_query_engine()
response = query_engine.query("xtuneræ˜¯ä»€ä¹ˆ?")

print(response)
```



è¿è¡Œè„šæœ¬ï¼š

```python
conda activate llamaindex
cd ~/llamaindex_demo/
python llamaindex_RAG.py
```

æ•ˆæœå¦‚ä¸‹ï¼š

![](./image/24.png)

![](./image/25.png)

å€ŸåŠ©RAGæŠ€æœ¯ï¼Œå¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆï¼Œå¹¶ä¸”æé—®InternLM2.5å…¶ä»–å›ç­”ä¸ä¸Šæ¥çš„é—®é¢˜ï¼Œé€šè¿‡RAGæŠ€æœ¯ä¹Ÿèƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„å›ç­”ã€‚

## ä¸‰ã€ LlamaIndex web

æˆ‘ä»¬å°†ä¸Šé¢å€ŸåŠ©RAGæŠ€æœ¯å®ç°çš„demoéƒ¨ç½²æˆwebç‰ˆä½“éªŒã€‚

é¦–å…ˆåœ¨æˆ‘ä»¬å½“å‰çš„Llamaindexçš„condaç¯å¢ƒä¸­å®‰è£…streamlitçš„ä¾èµ–

```python
pip install streamlit==1.39.0
cd ~/llamaindex_demo
touch app.py
```



app.pyçš„å†…å®¹å°±æ˜¯æˆ‘ä»¬å³å°†éƒ¨ç½²çš„webåº”ç”¨çš„è„šæœ¬ä»£ç 

```python
import streamlit as st
from llama_index.core import VectorStoreIndex, SimpleDirectoryReader, Settings
from llama_index.embeddings.huggingface import HuggingFaceEmbedding
from llama_index.legacy.callbacks import CallbackManager
from llama_index.llms.openai_like import OpenAILike
import os

# Create an instance of CallbackManager
callback_manager = CallbackManager()

api_base_url =  "https://internlm-chat.intern-ai.org.cn/puyu/api/v1/"
model = "internlm2.5-latest"
api_key = os.getenv("API_KEY")

# api_base_url =  "https://api.siliconflow.cn/v1"
# model = "internlm/internlm2_5-7b-chat"
# api_key = "è¯·å¡«å†™ API Key"

llm =OpenAILike(model=model, api_base=api_base_url, api_key=api_key, is_chat_model=True,callback_manager=callback_manager)



st.set_page_config(page_title="llama_index_demo", page_icon="ğŸ¦œğŸ”—")
st.title("llama_index_demo")

# åˆå§‹åŒ–æ¨¡å‹
@st.cache_resource
def init_models():
    embed_model = HuggingFaceEmbedding(
        model_name="/root/model/sentence-transformer"
    )
    Settings.embed_model = embed_model

    #ç”¨åˆå§‹åŒ–llm
    Settings.llm = llm

    documents = SimpleDirectoryReader("/root/llamaindex_demo/data").load_data()
    index = VectorStoreIndex.from_documents(documents)
    query_engine = index.as_query_engine()

    return query_engine

# æ£€æŸ¥æ˜¯å¦éœ€è¦åˆå§‹åŒ–æ¨¡å‹
if 'query_engine' not in st.session_state:
    st.session_state['query_engine'] = init_models()

def greet2(question):
    response = st.session_state['query_engine'].query(question)
    return response

      
# Store LLM generated responses
if "messages" not in st.session_state.keys():
    st.session_state.messages = [{"role": "assistant", "content": "ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"}]    

    # Display or clear chat messages
for message in st.session_state.messages:
    with st.chat_message(message["role"]):
        st.write(message["content"])

def clear_chat_history():
    st.session_state.messages = [{"role": "assistant", "content": "ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"}]

st.sidebar.button('Clear Chat History', on_click=clear_chat_history)

# Function for generating LLaMA2 response
def generate_llama_index_response(prompt_input):
    return greet2(prompt_input)

# User-provided prompt
if prompt := st.chat_input():
    st.session_state.messages.append({"role": "user", "content": prompt})
    with st.chat_message("user"):
        st.write(prompt)

# Gegenerate_llama_index_response last message is not from assistant
if st.session_state.messages[-1]["role"] != "assistant":
    with st.chat_message("assistant"):
        with st.spinner("Thinking..."):
            response = generate_llama_index_response(prompt)
            placeholder = st.empty()
            placeholder.markdown(response)
    message = {"role": "assistant", "content": response}
    st.session_state.messages.append(message)
```

ç„¶åæˆ‘ä»¬ç›´æ¥è¿è¡Œï¼š

```python
streamlit run app.py
```



![](./image/28.png)

ç„¶åæœ¬åœ°sshè¿æ¥sï¼Œå¿«æ·é”®win+Ræ‰“å¼€è¾“å…¥cmdï¼Œç„¶åå†è¾“å…¥ï¼š`sh -CNg -L 8501:127.0.0.1:8501 root@ssh.intern-ai.org.cn -p 37760`

![](./image/29.png)

ä¸‹é¢å°±æ˜¯webçš„æ•ˆæœäº†

![](./image/26.png)

![](./image/27.png)

#### æ¥ä¸‹æ¥æˆ‘ä»¬å°†Space éƒ¨ç½²åˆ° Hugging Face

1.é¦–å…ˆå»Huggingfaceå®˜ç½‘åˆ›å»ºspaceç©ºé—´

![](./image/32.png)

2.å…ˆè®¾ç½®ä¸‹access tokençš„ä»¤ç‰Œå§ï¼Œä¾¿äºä½ è®¿é—®huggingfaceï¼Œè®°å¾—ä»¤ç‰Œå¤åˆ¶ä¸‹æ¥ï¼Œåé¢ä¼šç”¨ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åœ¨å¼€å‘æœºä¸­é…ç½®ä¸‹ï¼Œä¸ç„¶æ¯æ¬¡éƒ¨ç½²é¡¹ç›®åˆ°spaceç©ºé—´éƒ½éœ€è¦ä»¤ç‰Œå’Œç”¨æˆ·åç™»å½•ï¼Œä»¤ç‰Œæ˜¯æ”¯æŒrefreshçš„ï¼Œä¸ç”¨æ‹…å¿ƒå¿˜è®°äº†å¤åˆ¶ã€‚

![](./image/33.png)

![](./image/34.png)

3.åˆ›å»ºæˆåŠŸåå†å›åˆ°å¼€å‘æœºæ‰§è¡Œä¸‹é¢å‘½ä»¤

```python
# clone hfçš„ä»“åº“åˆ°æœ¬åœ°
git clone https://hf-mirror.com/spaces/dstars/Internlm2.5_RAG
# ç„¶åå°†æˆ‘ä»¬çš„llama_indexçš„web_demoçš„ç§»åŠ¨åˆ°Internlm2.5_RAGè·¯å¾„ä¸‹
cd /root/Internlm2.5_RAG
cp -r /root/llamaindex_demo/* /root/Internlm2.5_RAG/
# è¯·æ³¨æ„app.pyæ–‡ä»¶ä¸­çš„æœ¬åœ°å¼€æºè¯å‘é‡sentence-transformersæ¨¡å‹è·¯å¾„ä¿®æ”¹ï¼ŒdataçŸ¥è¯†åº“çš„è·¯å¾„ä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€èµ˜è¿°äº†
git add .
git commit -m "Add Streamlit + LlamaIndex + æµ¦è¯­ API project"
git push
# pushåå¦‚æœè¦æ±‚ä½ è¾“å…¥huggingfaceçš„ç”¨æˆ·åå’Œaccess Toeknä»¤ç‰Œï¼Œæ­£å¸¸è¾“å…¥å³å¯ï¼Œåé¢ä¼šç²˜è´´æˆªå›¾æ•™ç¨‹ã€‚
```

4.è®°å¾—è®¾ç½®ä¸‹è„šæœ¬éœ€è¦çš„API_KEY

![](./image/35.png)



![](./image/36.png)

**5.ç»™ä¸€ä¸ªtipsï¼Œå°å»ºè®®**

ä¸è¦æŠŠcondaç¯å¢ƒå¯¼å…¥åˆ°`requirements.txt`ï¼Œå› ä¸ºæˆ‘ä»¬å¼€å‘æœºæ˜¯ç”¨GPUè·‘çš„demoï¼Œè€Œæˆ‘ä»¬åœ¨huggingfaceåˆ›å»ºçš„spaceæ˜¯å…è´¹çš„CPUæœåŠ¡å™¨ï¼ˆHuggingFaceä»˜è´¹å¤§ä½¬è¯·å¿½è§†è¿™ä¸ªtips~ï¼‰ï¼Œé‡Œé¢ä¸€å¤§å †ä¸å…¼å®¹ï¼Œè¿™é‡Œå»ºè®®requirements.txtåªåŒ…å«`Llamaindexçš„ç›¸å…³åŒ…çš„ç‰ˆæœ¬å’Œstreamlitçš„ç‰ˆæœ¬`ï¼ˆä¸è®°å¾—ç‰ˆæœ¬å·çœ‹æ•™ç¨‹readme.mdï¼‰ï¼Œå‰©ä¸‹çš„Buildè¿‡ç¨‹éƒ½æ˜¯è‡ªåŠ¨åŒ–ä¸‹è½½çš„ã€‚

HFçš„éƒ¨ç½²æ•ˆæœå±•ç¤ºï¼š

![](./image/31.png)

![](./image/30.png)

## æ€»ç»“

æœ‰ä»»ä½•ä¸æ‡‚çš„å¯ä»¥ç›´æ¥ç•™è¨€å“ˆï¼Œå¸Œæœ›å„ä½å¤§ä½¬å¤šå¸®æˆ‘ç‚¹ç‚¹starï¼Œç‚¹ç‚¹èµå’Œåˆ†äº«å•¥çš„ï¼ˆCSDNï¼‰ï¼Œè°¢è°¢~



# L1G5000-XTuner å¾®è°ƒå®è·µ

## ä¸€ã€äº¤ä½œä¸š

è¿™é‡Œç®€å•è¯´æ˜ä¸‹ï¼Œå› ä¸ºå‰å‡ æœŸæ­å»ºè¿‡Xtunerçš„ç¯å¢ƒï¼Œæ‰€ä»¥å‘¢ï¼Œå°±ä¸é‡å¤è®°å½•äº†ï¼Œä½†æ˜¯ä¸‹é¢çš„ä»£ç ä¾æ—§é€‚ç”¨æ–°æ¥å’Œä¸ç†Ÿæ‚‰çš„å°ä¼™ä¼´ï¼Œæ‰€ä»¥æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½ ä»¬å¯ç›´æ¥ç•™è¨€~ 

```python
# ä½¿ç”¨ conda å…ˆæ„å»ºä¸€ä¸ª Python-3.10 çš„è™šæ‹Ÿç¯å¢ƒ
cd ~
#git clone æœ¬repo
git clone https://github.com/InternLM/Tutorial.git -b camp4
mkdir -p /root/finetune && cd /root/finetune
conda create -n xtuner python=3.10 -y
conda activate xtuner
# å®‰è£… XTuner
git clone https://github.com/InternLM/xtuner.git
cd /root/finetune/xtuner

pip install  -e '.[all]'
# å¦‚æœå‡ºç° command error: 'cannot import name 'log' from 'torch.distributed.elastic.agent.server.api' (/root/.conda/envs/xtuner/lib/python3.10/site-packages/torch/distributed/elastic/agent/server/api.py)'!æˆ–è€…å‡ºç°ï¼šâ€œcommand error: 'cannot import name 'EncoderDecoderCache' from 'transformers' (/root/.conda/envs/xtunerlx/lib/python3.10/site-packages/transformers/__init__.py)'!â€æŠ¥é”™ï¼Œå»ºè®®å®‰è£…ä¸‹é¢çš„torchç‰ˆæœ¬å’Œtransformersç‰ˆæœ¬4.47.1ï¼Œåé¢è¿è¡Œä¸ªäººå°åŠ©æ‰‹çš„æ¨¡å‹æ—¶å€™ï¼Œå¯èƒ½è¿˜éœ€è¦è°ƒæ•´teansformersç‰ˆæœ¬ã€‚
pip install torch==2.1.0+cu121 torchvision==0.16.0+cu121 torchaudio==2.1.0+cu121 --index-url https://download.pytorch.org/whl/cu121
pip install transformers==4.47.1
pip install streamlit==1.36.0
# å®‰è£…å‡ºç°â€œCould not find a version that satisfies the requirement bitsandbytes>=0.40.0.post4 (from xtuner) (from versions: none)â€ï¼Œç›´æ¥Ctrl+Cé€€å‡ºæ‰§è¡Œ
pip install --trusted-host mirrors.aliyun.com -e '.[deepspeed]' -i https://mirrors.aliyun.com/pypi/simple/
```



xtunerå®‰è£…æˆåŠŸ

![](./image/37.png)

Xtunerå¾®è°ƒinternlm2_5-7b-chatï¼š

```python
# åˆ›å»ºæ–‡ä»¶å¤¹å­˜å‚¨å¾®è°ƒæ•°æ®
mkdir -p /root/finetune/data && cd /root/finetune/data
cp -r /root/Tutorial/data/assistant_Tuner.jsonl  /root/finetune/data
# åˆ›å»º `change_script.py` æ–‡ä»¶
touch /root/finetune/data/change_script.py
# change_script.pyå†…å®¹å¦‚ä¸‹
import json
import argparse
from tqdm import tqdm

def process_line(line, old_text, new_text):
    # è§£æ JSON è¡Œ
    data = json.loads(line)
    
    # é€’å½’å‡½æ•°æ¥å¤„ç†åµŒå¥—çš„å­—å…¸å’Œåˆ—è¡¨
    def replace_text(obj):
        if isinstance(obj, dict):
            return {k: replace_text(v) for k, v in obj.items()}
        elif isinstance(obj, list):
            return [replace_text(item) for item in obj]
        elif isinstance(obj, str):
            return obj.replace(old_text, new_text)
        else:
            return obj
    
    # å¤„ç†æ•´ä¸ª JSON å¯¹è±¡
    processed_data = replace_text(data)
    
    # å°†å¤„ç†åçš„å¯¹è±¡è½¬å› JSON å­—ç¬¦ä¸²
    return json.dumps(processed_data, ensure_ascii=False)

def main(input_file, output_file, old_text, new_text):
    with open(input_file, 'r', encoding='utf-8') as infile, \
         open(output_file, 'w', encoding='utf-8') as outfile:
        
        # è®¡ç®—æ€»è¡Œæ•°ç”¨äºè¿›åº¦æ¡
        total_lines = sum(1 for _ in infile)
        infile.seek(0)  # é‡ç½®æ–‡ä»¶æŒ‡é’ˆåˆ°å¼€å¤´
        
        # ä½¿ç”¨ tqdm åˆ›å»ºè¿›åº¦æ¡
        for line in tqdm(infile, total=total_lines, desc="Processing"):
            processed_line = process_line(line.strip(), old_text, new_text)
            outfile.write(processed_line + '\n')

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Replace text in a JSONL file.")
    parser.add_argument("input_file", help="Input JSONL file to process")
    parser.add_argument("output_file", help="Output file for processed JSONL")
    parser.add_argument("--old_text", default="å°–ç±³", help="Text to be replaced")
    parser.add_argument("--new_text", default="your_name", help="Text to replace with")
    args = parser.parse_args()

    main(args.input_file, args.output_file, args.old_text, args.new_text)
# æ‰§è¡Œè„šæœ¬
cd ~/finetune/data
python change_script.py ./assistant_Tuner.jsonl ./assistant_Tuner_change.jsonl
# å¯ç”¨catæŸ¥çœ‹æ”¹æ­£åçš„æ•°æ®
cat assistant_Tuner_change.jsonl | head -n 3
# å‡†å¤‡è®­ç»ƒï¼Œæ‹¿åˆ°å¾…è®­ç»ƒæ¨¡å‹
mkdir /root/finetune/models
ln -s /root/share/new_models/Shanghai_AI_Laboratory/internlm2_5-7b-chat /root/finetune/models/internlm2_5-7b-chat
# ä¿®æ”¹æ¨¡å‹çš„è®­ç»ƒè„šæœ¬
cd /root/finetune
mkdir ./config
cd config
xtuner copy-cfg internlm2_5_chat_7b_qlora_alpaca_e3 ./
# ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹
#######################################################################
#                          PART 1  Settings                           #
#######################################################################
- pretrained_model_name_or_path = 'internlm/internlm2_5-7b-chat'
+ pretrained_model_name_or_path = '/root/finetune/models/internlm2_5-7b-chat'

- alpaca_en_path = 'tatsu-lab/alpaca'
+ alpaca_en_path = '/root/finetune/data/assistant_Tuner_change.jsonl'


evaluation_inputs = [
-    'è¯·ç»™æˆ‘ä»‹ç»äº”ä¸ªä¸Šæµ·çš„æ™¯ç‚¹', 'Please tell me five scenic spots in Shanghai'
+    'è¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±', 'Please introduce yourself'
]

#######################################################################
#                      PART 3  Dataset & Dataloader                   #
#######################################################################
alpaca_en = dict(
    type=process_hf_dataset,
-   dataset=dict(type=load_dataset, path=alpaca_en_path),
+   dataset=dict(type=load_dataset, path='json', data_files=dict(train=alpaca_en_path)),
    tokenizer=tokenizer,
    max_length=max_length,
-   dataset_map_fn=alpaca_map_fn,
+   dataset_map_fn=None,
    template_map_fn=dict(
        type=template_map_fn_factory, template=prompt_template),
    remove_unused_columns=True,
    shuffle_before_pack=True,
    pack_to_max_length=pack_to_max_length,
    use_varlen_attn=use_varlen_attn)
# å¼€å¯å¾®è°ƒ
cd /root/finetune
conda activate xtuner

xtuner train ./config/internlm2_5_chat_7b_qlora_alpaca_e3_copy.py --deepspeed deepspeed_zero2 --work-dir ./work_dirs/assistTuner
# è½¬æ¢æƒé‡æ–‡ä»¶
cd /root/finetune/work_dirs/assistTuner

conda activate xtuner

# å…ˆè·å–æœ€åä¿å­˜çš„ä¸€ä¸ªpthæ–‡ä»¶
pth_file=`ls -t /root/finetune/work_dirs/assistTuner/*.pth | head -n 1 | sed 's/:$//'`
export MKL_SERVICE_FORCE_INTEL=1
export MKL_THREADING_LAYER=GNU
xtuner convert pth_to_hf ./internlm2_5_chat_7b_qlora_alpaca_e3_copy.py ${pth_file} ./hf
# æ¨¡å‹åˆå¹¶
cd /root/finetune/work_dirs/assistTuner
conda activate xtuner

export MKL_SERVICE_FORCE_INTEL=1
export MKL_THREADING_LAYER=GNU
xtuner convert merge /root/finetune/models/internlm2_5-7b-chat ./hf ./merged --max-shard-size 2GB
# ä½¿ç”¨è½¬æ¢åçš„æ¨¡å‹è¿›è¡ŒwebUIå¯¹è¯
cd ~/Tutorial/tools/L1_XTuner_code
cp ~/Tutorial/tools/L1_XTuner_code/xtuner_streamlit_demo.py /root/finetune
# ä¿®æ”¹ä¸‹æ¨¡å‹åŠ è½½è·¯å¾„model_name_or_path = "/root/finetune/work_dirs/assistTuner/merged"
streamlit run /root/finetune/xtuner_streamlit_demo.py

# åœ¨æœ¬åœ°ç«¯å£cmdä¸­è¿›è¡Œæ˜ å°„ï¼Œ*****è¡¨ç¤ºå¼€å‘æœºçš„ç«¯å£å·
ssh -CNg -L 8501:127.0.0.1:8501 root@ssh.intern-ai.org.cn -p *****

```

æ•ˆæœåŠå…³é”®æ­¥éª¤æˆªå›¾ï¼š

![](./image/38.png)

![](./image/40.png)

![](./image/41.png)

![](./image/39.png)



### æ€»ç»“

ä¸»è¦å°±æ˜¯ä¸€ä¸ªç†Ÿæ‚‰xtuneræ“ä½œæµç¨‹ï¼Œæ•°æ®é›†çš„å¤§å°ï¼Œä»¥åŠå¾®è°ƒè¿‡ç¨‹ä¸­è®¾ç½®æ¨¡å‹çš„è¶…å‚æ•°å¯¼è‡´æ›´æ–°çš„æ¨¡å‹æƒé‡æ–‡ä»¶è®©æ¨¡å‹çš„è¾“å‡ºå¾ˆå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œè§£å†³åŠæ³•å°±æ˜¯é‡‡ç”¨æ›´åŠ å¤§é‡å¤šæ ·æ€§çš„æ•°æ®ä»¥åŠè°ƒæ•´è¶…å‚æ•°ä»¥åŠä¼˜åŒ–å™¨çš„ä½¿ç”¨ã€‚

# L1G6000-OpenCompass è¯„æµ‹ä¹¦ç”Ÿå¤§æ¨¡å‹å®è·µ

### è¯„æµ‹æµ¦è¯­APIæ¨¡å‹

å®‰è£…ç¯å¢ƒï¼š

```python
conda create -n opencompass python=3.10
conda activate opencompass

cd /root
git clone -b 0.3.3 https://github.com/open-compass/opencompass
cd opencompass
pip install -e .
pip install -r requirements.txt
pip install huggingface_hub==0.25.2

# è¯„æµ‹API
cd /root/opencompass/
touch root/opencompass/configs/models/openai/puyu_api.py
# puyu_api.pyçš„å†…å®¹å¦‚ä¸‹
import os
from opencompass.models import OpenAISDK


internlm_url = 'https://internlm-chat.intern-ai.org.cn/puyu/api/v1/' # ä½ å‰é¢è·å¾—çš„ api æœåŠ¡åœ°å€
internlm_api_key = os.getenv('INTERNLM_API_KEY')

models = [
    dict(
        # abbr='internlm2.5-latest',
        type=OpenAISDK,
        path='internlm2.5-latest', # è¯·æ±‚æœåŠ¡æ—¶çš„ model name
        # æ¢æˆè‡ªå·±ç”³è¯·çš„APIkey
        key=internlm_api_key, # API key
        openai_api_base=internlm_url, # æœåŠ¡åœ°å€
        rpm_verbose=True, # æ˜¯å¦æ‰“å°è¯·æ±‚é€Ÿç‡
        query_per_second=0.16, # æœåŠ¡è¯·æ±‚é€Ÿç‡
        max_out_len=1024, # æœ€å¤§è¾“å‡ºé•¿åº¦
        max_seq_len=4096, # æœ€å¤§è¾“å…¥é•¿åº¦
        temperature=0.01, # ç”Ÿæˆæ¸©åº¦
        batch_size=1, # æ‰¹å¤„ç†å¤§å°
        retry=3, # é‡è¯•æ¬¡æ•°
    )
]

# é…ç½®æ•°æ®é›†
cd /root/opencompass/
touch /root/opencompass/configs/datasets/demo/demo_cmmlu_chat_gen.py
# demo_cmmlu_chat_gen.pyçš„å†…å®¹å¦‚ä¸‹
from mmengine import read_base

with read_base():
    from ..cmmlu.cmmlu_gen_c13365 import cmmlu_datasets


# æ¯ä¸ªæ•°æ®é›†åªå–å‰2ä¸ªæ ·æœ¬è¿›è¡Œè¯„æµ‹
for d in cmmlu_datasets:
    d['abbr'] = 'demo_' + d['abbr']
    d['reader_cfg']['test_range'] = '[0:1]' # è¿™é‡Œæ¯ä¸ªæ•°æ®é›†åªå–1ä¸ªæ ·æœ¬, æ–¹ä¾¿å¿«é€Ÿè¯„æµ‹.


# å¼€å§‹è¯„æµ‹
python run.py --models puyu_api.py --datasets demo_cmmlu_chat_gen.py --debug
```



æ•ˆæœæˆªå›¾ï¼š

![](./image/42.png)

![](./image/43.png)

è¿™é‡Œé¢æ˜¯ä¸€äº›**`internlm2.5-latest`**æ¨¡å‹åœ¨CMMLUçš„æ•°æ®ä¸Šè¯„ä¼°çš„ç»“æœï¼Œå±•ç¤ºäº†æ•°æ®é›†çš„åç§°å’Œç‰ˆæœ¬ï¼Œå‡†ç¡®ç‡ï¼Œä¸åŒä»»åŠ¡çš„è¡¨ç°ï¼Œæ¯”å¦‚åœ¨å†œä¸šã€è‰ºæœ¯ç­‰æ–¹å‘è¡¨ç°ä¼˜ç§€ï¼Œåœ¨æ¶‰åŠå¤æ‚çš„æ•°å­¦æ¨ç†å°±è¡¨ç°å¾—è¾ƒå·®ã€‚

### è¯„æµ‹æœ¬åœ°æ¨¡å‹

```python
# å®‰è£…é…ç½®æ–‡ä»¶
cd /root/opencompass
conda activate opencompass
conda install pytorch==2.1.2 torchvision==0.16.2 torchaudio==2.1.2 pytorch-cuda=12.1 -c pytorch -c nvidia -y
apt-get update
apt-get install cmake
pip install protobuf==4.25.3
pip install huggingface-hub==0.23.2
# å°†æ•°æ®é›†ä¸‹è½½åˆ°æœ¬åœ°
cp /share/temp/datasets/OpenCompassData-core-20231110.zip /root/opencompass/
unzip OpenCompassData-core-20231110.zip
# é€šè¿‡è¿è¡Œ list_configs å‘½ä»¤åˆ—å‡ºæ‰€æœ‰è·Ÿ InternLM åŠ C-Eval ç›¸å…³çš„é…ç½®
python tools/list_configs.py internlm ceval
# æ‰“å¼€configs/models/hf_internlm/çš„ hf_internlm2_5_1_8b_chat.py æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š
from opencompass.models import HuggingFacewithChatTemplate

models = [
    dict(
        type=HuggingFacewithChatTemplate,
        abbr='internlm2-chat-1.8b-hf',
        path='/share/new_models/Shanghai_AI_Laboratory/internlm2_chat_1_8b/',
        max_out_len=1024,
        batch_size=8,
        run_cfg=dict(num_gpus=1),
    )
]
# å¼€å§‹è¯„æµ‹
python run.py --datasets ceval_gen --models hf_internlm2_chat_1_8b --debug
```



è¯„æµ‹ç»“æœï¼š

![](./image/44.png)

### å°†æœ¬åœ°æ¨¡å‹é€šè¿‡éƒ¨ç½²æˆAPIæœåŠ¡å†è¯„æµ‹

```python
# æ–°æ‰“å¼€ä¸€ä¸ªterminalç»ˆç«¯
pip install lmdeploy==0.6.1 openai==1.52.0
pip install turbomind

lmdeploy serve api_server /share/new_models/Shanghai_AI_Laboratory/internlm2-chat-1_8b/ --server-port 23333
# ç„¶åå†å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¾“å…¥æ‰“å°æŒ‡å®šæœåŠ¡çš„æ¨¡å‹åç§°
from openai import OpenAI
client = OpenAI(
    api_key='sk-123456', # å¯ä»¥è®¾ç½®æˆéšæ„çš„å­—ç¬¦ä¸²
    base_url="http://0.0.0.0:23333/v1"
)
model_name = client.models.list().data[0].id
print(model_name) # æ³¨å†Œçš„æ¨¡å‹åç§°éœ€è¦è¢«ç”¨äºåç»­é…ç½®.

# å¾—åˆ°è¾“å‡ºç»“æœï¼š/share/new_models/Shanghai_AI_Laboratory/internlm2-chat-1_8b/
# æ‰“å¼€ /root/opencompass/configs/models/hf_internlm/hf_internlm2_5_1_8b_chat_api.pyä¿®æ”¹å†…å®¹å¦‚ä¸‹

from opencompass.models import OpenAI

api_meta_template = dict(round=[
    dict(role='HUMAN', api_role='HUMAN'),
    dict(role='BOT', api_role='BOT', generate=True),
])
models = [
    dict(
        abbr='InternLM-2.5-1.8B-Chat',
        type=OpenAI,
        path='/share/new_models/Shanghai_AI_Laboratory/internlm2-chat-1_8b/', # æ³¨å†Œçš„æ¨¡å‹åç§°
        key='sk-123456',
        openai_api_base='http://0.0.0.0:23333/v1/chat/completions', 
        meta_template=api_meta_template,
        query_per_second=1,
        max_out_len=2048,
        max_seq_len=4096,
        batch_size=8),
]
# ç„¶åå¼€å§‹è¯„æµ‹ï¼ˆæŠ¥é”™opencompassçš„è¯ï¼Œç›´æ¥pip install opencompassï¼‰ï¼Œlmdeploy serve api_server /share/new_models/Shanghai_AI_Laboratory/internlm2-chat-1_8b/ --server-port 23333
opencompass --models hf_internlm2_chat_1_8b --datasets ceval_gen --debug
```



æ•ˆæœå±•ç¤ºå¦‚ä¸‹ï¼š

![](./image/45.png)

### æ€»ç»“

ä¸»è¦å°±æ˜¯æµ‹è¯„å½“å‰çš„æ¨¡å‹éƒ¨ç½²APIåæµ‹è¯•cevalæ•°æ®é›†çš„å‡†ç¡®ç‡çš„å±•ç¤ºï¼Œå‘ç°å’Œä¸Šé¢æµ‹è¯•æœ¬åœ°`internlm2_chat_1_8b`æ¨¡å‹çš„å‡†ç¡®ç‡åˆ†æ•°ä¸€è‡´çš„ã€‚